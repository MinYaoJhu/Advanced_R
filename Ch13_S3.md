---
title: "Ch13_S3"
author: "Min-Yao"
date: "2023-03-05"
output: 
  html_document: 
    keep_md: yes
---

# S3 {#s3}

## 13.1 Introduction
\index{S3} 

S3 is R's first and simplest OO system. S3 is informal and ad hoc, but there is a certain elegance in its minimalism: you can't take away any part of it and still have a useful OO system. For these reasons, you should use it, unless you have a compelling reason to do otherwise. S3 is the only OO system used in the base and stats packages, and it's the most commonly used system in CRAN packages.

S3 is very flexible, which means it allows you to do things that are quite ill-advised. If you're coming from a strict environment like Java this will seem pretty frightening, but it gives R programmers a tremendous amount of freedom.  It may be very difficult to prevent people from doing something you don't want them to do, but your users will never be held back because there is something you haven't implemented yet. Since S3 has few built-in constraints, the key to its successful use is applying the constraints yourself. This chapter will therefore teach you the conventions you should (almost) always follow.

The goal of this chapter is to show you how the S3 system works, not how to use it effectively to create new classes and generics. I'd recommend coupling the theoretical knowledge from this chapter with the practical knowledge encoded in the [vctrs package](https://vctrs.r-lib.org).

### Outline {-}

* Section \@ref(s3-basics) gives a rapid overview of all the main components 
  of S3: classes, generics, and methods. You'll also learn about
  `sloop::s3_dispatch()`, which we'll use throughout the chapter to explore
  how S3 works.
  
* Section \@ref(s3-classes) goes into the details of creating a new S3 class,
  including the three functions that should accompany most classes: 
  a constructor, a helper, and a validator.
  
* Section \@ref(s3-methods) describes how S3 generics and methods work, 
  including the basics of method dispatch.
  
* Section \@ref(object-styles) discusses the four main styles of S3 objects:
  vector, record, data frame, and scalar.
  
* Section \@ref(s3-inheritance) demonstrates how inheritance works in S3,
  and shows you what you need to make a class "subclassable".
  
* Section \@ref(s3-dispatch) concludes the chapter with a discussion of the
  finer details of method dispatch including base types, internal generics,
  group generics, and double dispatch.

### Prerequisites {-}

S3 classes are implemented using attributes, so make sure you're familiar with the details described in Section \@ref(attributes). We'll use existing base S3 vectors for examples and exploration, so make sure that you're familiar with the factor, Date, difftime, POSIXct, and POSIXlt classes described in Section \@ref(s3-atomic-vectors). 

We'll use the [sloop](https://sloop.r-lib.org) package for its interactive helpers.


```r
library(sloop)
```

## 13.2 Basics {#s3-basics}
\index{attributes!class}
\index{classes!S3}
\indexc{class()}

An S3 object is a base type with at least a `class` attribute (other attributes may be used to store other data). For example, take the factor. Its base type is the integer vector, it has a `class` attribute of "factor", and a `levels` attribute that stores the possible levels:


```r
f <- factor(c("a", "b", "c"))

typeof(f)
```

```
## [1] "integer"
```

```r
attributes(f)
```

```
## $levels
## [1] "a" "b" "c"
## 
## $class
## [1] "factor"
```

You can get the underlying base type by `unclass()`ing it, which strips the class attribute, causing it to lose its special behaviour:


```r
unclass(f)
```

```
## [1] 1 2 3
## attr(,"levels")
## [1] "a" "b" "c"
```

\index{generics}
\index{functions!generic}

An S3 object behaves differently from its underlying base type whenever it's passed to a __generic__ (short for generic function). The easiest way to tell if a function is a generic is to use `sloop::ftype()` and look for "generic" in the output:


```r
ftype(print)
```

```
## [1] "S3"      "generic"
```

```r
ftype(str)
```

```
## [1] "S3"      "generic"
```

```r
ftype(unclass)
```

```
## [1] "primitive"
```

A generic function defines an interface, which uses a different implementation depending on the class of an argument (almost always the first argument). Many base R functions are generic, including the important `print()`:


```r
print(f)
```

```
## [1] a b c
## Levels: a b c
```

```r
# stripping class reverts to integer behaviour
print(unclass(f))
```

```
## [1] 1 2 3
## attr(,"levels")
## [1] "a" "b" "c"
```

Beware that `str()` is generic, and some S3 classes use that generic to hide the internal details. For example, the `POSIXlt` class used to represent date-time data is actually built on top of a list, a fact which is hidden by its `str()` method:


```r
time <- strptime(c("2017-01-01", "2020-05-04 03:21"), "%Y-%m-%d")
str(time)
```

```
##  POSIXlt[1:2], format: "2017-01-01" "2020-05-04"
```

```r
str(unclass(time))
```

```
## List of 11
##  $ sec   : num [1:2] 0 0
##  $ min   : int [1:2] 0 0
##  $ hour  : int [1:2] 0 0
##  $ mday  : int [1:2] 1 4
##  $ mon   : int [1:2] 0 4
##  $ year  : int [1:2] 117 120
##  $ wday  : int [1:2] 0 1
##  $ yday  : int [1:2] 0 124
##  $ isdst : int [1:2] 0 1
##  $ zone  : chr [1:2] "GMT" "BST"
##  $ gmtoff: int [1:2] NA NA
```

The generic is a middleman: its job is to define the interface (i.e. the arguments) then find the right implementation for the job. The implementation for a specific class is called a __method__, and the generic finds that method by performing __method dispatch__.

You can use `sloop::s3_dispatch()` to see the process of method dispatch:


```r
s3_dispatch(print(f))
```

```
## => print.factor
##  * print.default
```

\index{S3!methods}
We'll come back to the details of dispatch in Section \@ref(method-dispatch), for now note that S3 methods are functions with a special naming scheme, `generic.class()`. For example, the `factor` method for the `print()` generic is called `print.factor()`. You should never call the method directly, but instead rely on the generic to find it for you.

Generally, you can identify a method by the presence of `.` in the function name, but there are a number of important functions in base R that were written before S3, and hence use `.` to join words. If you're unsure, check with `sloop::ftype()`:


```r
ftype(t.test)
```

```
## [1] "S3"      "generic"
```

```r
ftype(t.data.frame)
```

```
## [1] "S3"     "method"
```

\index{S3!finding source}
Unlike most functions, you can't see the source code for most S3 methods[^base-s3] just by typing their names. That's because S3 methods are not usually exported: they live only inside the package, and are not available from the global environment. Instead, you can use `sloop::s3_get_method()`, which will work regardless of where the method lives:


```r
weighted.mean.Date
```

```
## Error in eval(expr, envir, enclos): object 'weighted.mean.Date' not found
```

```r
s3_get_method(weighted.mean.Date)
```

```
## function (x, w, ...) 
## .Date(weighted.mean(unclass(x), w, ...))
## <bytecode: 0x000001af0e7716c0>
## <environment: namespace:stats>
```

[^base-s3]: The exceptions are methods found in the base package, like `t.data.frame`, and methods that you've created.

### Exercises

1.  Describe the difference between `t.test()` and `t.data.frame()`.
    When is each function called?


```r
ftype(t.test)
```

```
## [1] "S3"      "generic"
```

```r
ftype(t.data.frame)
```

```
## [1] "S3"     "method"
```

> t.test() is a generic function in stats. Performs one and two sample t-tests on vectors of data.

> t.data.frame() is a method in base. Given a matrix or data.frame x, t returns the transpose of x.

2.  Make a list of commonly used base R functions that contain `.` in their
    name but are not S3 methods.
    

```r
library(rlist)
```

    

```r
objs <- mget(ls("package:base", all = TRUE), inherits = TRUE)
funs <- Filter(is.function, objs)
funs_df <- as.list(funs)
head(funs_df)
```

```
## $`-`
## function (e1, e2)  .Primitive("-")
## 
## $`-.Date`
## function (e1, e2) 
## {
##     coerceTimeUnit <- function(x) as.vector(round(switch(attr(x, 
##         "units"), secs = x/86400, mins = x/1440, hours = x/24, 
##         days = x, weeks = 7 * x)))
##     if (!inherits(e1, "Date")) 
##         stop("can only subtract from \"Date\" objects")
##     if (nargs() == 1L) 
##         stop("unary - is not defined for \"Date\" objects")
##     if (inherits(e2, "Date")) 
##         return(difftime(e1, e2, units = "days"))
##     if (inherits(e2, "difftime")) 
##         e2 <- coerceTimeUnit(e2)
##     if (!is.null(attr(e2, "class"))) 
##         stop("can only subtract numbers from \"Date\" objects")
##     .Date(unclass(as.Date(e1)) - e2)
## }
## <bytecode: 0x000001af0dd43390>
## <environment: namespace:base>
## 
## $`-.POSIXt`
## function (e1, e2) 
## {
##     coerceTimeUnit <- function(x) as.vector(switch(attr(x, "units"), 
##         secs = x, mins = 60 * x, hours = 60 * 60 * x, days = 60 * 
##             60 * 24 * x, weeks = 60 * 60 * 24 * 7 * x))
##     if (!inherits(e1, "POSIXt")) 
##         stop("can only subtract from \"POSIXt\" objects")
##     if (nargs() == 1L) 
##         stop("unary '-' is not defined for \"POSIXt\" objects")
##     if (inherits(e2, "POSIXt")) 
##         return(difftime(e1, e2))
##     if (inherits(e2, "difftime")) 
##         e2 <- coerceTimeUnit(e2)
##     if (!is.null(attr(e2, "class"))) 
##         stop("can only subtract numbers from \"POSIXt\" objects")
##     e1 <- as.POSIXct(e1)
##     .POSIXct(unclass(e1) - e2, attr(e1, "tzone"))
## }
## <bytecode: 0x000001af0dd44df0>
## <environment: namespace:base>
## 
## $`!`
## function (x)  .Primitive("!")
## 
## $`!.hexmode`
## function (a) 
## as.hexmode(bitwNot(as.hexmode(a)))
## <bytecode: 0x000001af0dd45f90>
## <environment: namespace:base>
## 
## $`!.octmode`
## function (a) 
## as.octmode(bitwNot(as.octmode(a)))
## <bytecode: 0x000001af0dd45af8>
## <environment: namespace:base>
```

```r
str(funs_df)
```

```
## List of 1335
##  $ -                                 :function (e1, e2)  
##  $ -.Date                            :function (e1, e2)  
##  $ -.POSIXt                          :function (e1, e2)  
##  $ !                                 :function (x)  
##  $ !.hexmode                         :function (a)  
##  $ !.octmode                         :function (a)  
##  $ !=                                :function (e1, e2)  
##  $ $                                 :.Primitive("$") 
##  $ $.DLLInfo                         :function (x, name)  
##  $ $.package_version                 :function (x, name)  
##  $ $<-                               :.Primitive("$<-") 
##  $ $<-.data.frame                    :function (x, name, value)  
##  $ %%                                :function (e1, e2)  
##  $ %*%                               :function (x, y)  
##  $ %/%                               :function (e1, e2)  
##  $ %in%                              :function (x, table)  
##  $ %o%                               :function (X, Y)  
##  $ %x%                               :function (X, Y)  
##  $ &                                 :function (e1, e2)  
##  $ &&                                :.Primitive("&&") 
##  $ &.hexmode                         :function (a, b)  
##  $ &.octmode                         :function (a, b)  
##  $ (                                 :.Primitive("(") 
##  $ *                                 :function (e1, e2)  
##  $ *.difftime                        :function (e1, e2)  
##  $ ...elt                            :function (n)  
##  $ ...length                         :function ()  
##  $ ...names                          :function ()  
##  $ ..getNamespace                    :function (name, where)  
##  $ .__H__.cbind                      :function (..., deparse.level = 1)  
##  $ .__H__.rbind                      :function (..., deparse.level = 1)  
##  $ .amatch_bounds                    :function (x = 0.1)  
##  $ .amatch_costs                     :function (x = NULL)  
##  $ .bincode                          :function (x, breaks, right = TRUE, include.lowest = FALSE)  
##  $ .C                                :function (.NAME, ..., NAOK = FALSE, DUP = TRUE, PACKAGE, ENCODING)  
##  $ .cache_class                      :function (class, extends)  
##  $ .Call                             :function (.NAME, ..., PACKAGE)  
##  $ .Call.graphics                    :function (.NAME, ..., PACKAGE)  
##  $ .class2                           :function (x)  
##  $ .col                              :function (dim)  
##  $ .colMeans                         :function (x, m, n, na.rm = FALSE)  
##  $ .colSums                          :function (x, m, n, na.rm = FALSE)  
##  $ .Date                             :function (xx, cl = "Date")  
##  $ .decode_numeric_version           :function (x)  
##  $ .Defunct                          :function (new, package = NULL, msg)  
##  $ .deparseOpts                      :function (control)  
##  $ .Deprecated                       :function (new, package = NULL, msg, old = as.character(sys.call(sys.parent()))[1L])  
##  $ .detach                           :function (pos)  
##  $ .difftime                         :function (xx, units, cl = "difftime")  
##  $ .doSortWrap                       :function (vec, decr, nalast, noNA = NA)  
##  $ .doTrace                          :function (expr, msg)  
##  $ .doWrap                           :function (vec, decr, nalast, noNA = NA)  
##  $ .dynLibs                          :function (new)  
##  $ .encode_numeric_version           :function (x)  
##  $ .expand_R_libs_env_var            :function (x)  
##  $ .External                         :function (.NAME, ..., PACKAGE)  
##  $ .External.graphics                :function (.NAME, ..., PACKAGE)  
##  $ .External2                        :function (.NAME, ..., PACKAGE)  
##  $ .First.sys                        :function ()  
##  $ .fixupGFortranStderr              :function ()  
##  $ .fixupGFortranStdout              :function ()  
##  $ .format.zeros                     :function (x, zero.print, nx = suppressWarnings(as.numeric(x)), replace = FALSE, 
##     warn.non.fitting = TRUE)  
##  $ .Fortran                          :function (.NAME, ..., NAOK = FALSE, DUP = TRUE, PACKAGE, ENCODING)  
##  $ .getNamespace                     :function (name)  
##  $ .getNamespaceInfo                 :function (ns, which)  
##  $ .getRequiredPackages              :function (file = "DESCRIPTION", lib.loc = NULL, quietly = FALSE, useImports = FALSE)  
##  $ .getRequiredPackages2             :function (pkgInfo, quietly = FALSE, lib.loc = NULL, useImports = FALSE)  
##  $ .gt                               :function (x, i, j)  
##  $ .gtn                              :function (x, strictly)  
##  $ .handleSimpleError                :function (h, msg, call)  
##  $ .Internal                         :function (call)  
##  $ .isMethodsDispatchOn              :function (onOff = NULL)  
##  $ .isOpen                           :function (srcfile)  
##  $ .kappa_tri                        :function (z, exact = FALSE, LINPACK = TRUE, norm = NULL, ...)  
##  $ .kronecker                        :function (X, Y, FUN = "*", make.dimnames = FALSE, ...)  
##  $ .libPaths                         :function (new, include.site = TRUE)  
##  $ .make_numeric_version             :function (x, strict = TRUE, regexp, classes = NULL)  
##  $ .makeMessage                      :function (..., domain = NULL, appendLF = FALSE)  
##  $ .mapply                           :function (FUN, dots, MoreArgs)  
##  $ .maskedMsg                        :function (same, pkg, by)  
##  $ .mergeExportMethods               :function (new, ns)  
##  $ .mergeImportMethods               :function (impenv, expenv, metaname)  
##  $ .NotYetImplemented                :function ()  
##  $ .NotYetUsed                       :function (arg, error = TRUE)  
##  $ .OptRequireMethods                :function ()  
##  $ .packages                         :function (all.available = FALSE, lib.loc = NULL)  
##  $ .packageStartupMessage            :function (message, call = NULL)  
##  $ .POSIXct                          :function (xx, tz = NULL, cl = c("POSIXct", "POSIXt"))  
##  $ .POSIXlt                          :function (xx, tz = NULL, cl = c("POSIXlt", "POSIXt"))  
##  $ .pretty                           :function (x, n = 5L, min.n = n%/%3L, shrink.sml = 0.75, high.u.bias = 1.5, 
##     u5.bias = 0.5 + 1.5 * high.u.bias, eps.correct = 0L, f.min = 2^-20, 
##     bounds = TRUE)  
##  $ .Primitive                        :function (name)  
##  $ .primTrace                        :function (obj)  
##  $ .primUntrace                      :function (obj)  
##  $ .rmpkg                            :function (pkg)  
##  $ .row                              :function (dim)  
##  $ .row_names_info                   :function (x, type = 1L)  
##  $ .rowMeans                         :function (x, m, n, na.rm = FALSE)  
##  $ .rowNamesDF<-                     :function (x, make.names = FALSE, value)  
##  $ .rowSums                          :function (x, m, n, na.rm = FALSE)  
##   [list output truncated]
```

```r
funs_df_name <- as.data.frame(names(funs_df))
funs_df_name$names <- funs_df_name[[1]]

str(funs_df_name)
```

```
## 'data.frame':	1335 obs. of  2 variables:
##  $ names(funs_df): chr  "-" "-.Date" "-.POSIXt" "!" ...
##  $ names         : chr  "-" "-.Date" "-.POSIXt" "!" ...
```

```r
funs_df_filtered <- dplyr::filter(funs_df_name, grepl('.',names))
funs_df_filtered
```

```
##                          names(funs_df)                              names
## 1                                     -                                  -
## 2                                -.Date                             -.Date
## 3                              -.POSIXt                           -.POSIXt
## 4                                     !                                  !
## 5                             !.hexmode                          !.hexmode
## 6                             !.octmode                          !.octmode
## 7                                    !=                                 !=
## 8                                     $                                  $
## 9                             $.DLLInfo                          $.DLLInfo
## 10                    $.package_version                  $.package_version
## 11                                  $<-                                $<-
## 12                       $<-.data.frame                     $<-.data.frame
## 13                                   %%                                 %%
## 14                                  %*%                                %*%
## 15                                  %/%                                %/%
## 16                                 %in%                               %in%
## 17                                  %o%                                %o%
## 18                                  %x%                                %x%
## 19                                    &                                  &
## 20                                   &&                                 &&
## 21                            &.hexmode                          &.hexmode
## 22                            &.octmode                          &.octmode
## 23                                    (                                  (
## 24                                    *                                  *
## 25                           *.difftime                         *.difftime
## 26                               ...elt                             ...elt
## 27                            ...length                          ...length
## 28                             ...names                           ...names
## 29                       ..getNamespace                     ..getNamespace
## 30                         .__H__.cbind                       .__H__.cbind
## 31                         .__H__.rbind                       .__H__.rbind
## 32                       .amatch_bounds                     .amatch_bounds
## 33                        .amatch_costs                      .amatch_costs
## 34                             .bincode                           .bincode
## 35                                   .C                                 .C
## 36                         .cache_class                       .cache_class
## 37                                .Call                              .Call
## 38                       .Call.graphics                     .Call.graphics
## 39                              .class2                            .class2
## 40                                 .col                               .col
## 41                            .colMeans                          .colMeans
## 42                             .colSums                           .colSums
## 43                                .Date                              .Date
## 44              .decode_numeric_version            .decode_numeric_version
## 45                             .Defunct                           .Defunct
## 46                         .deparseOpts                       .deparseOpts
## 47                          .Deprecated                        .Deprecated
## 48                              .detach                            .detach
## 49                            .difftime                          .difftime
## 50                          .doSortWrap                        .doSortWrap
## 51                             .doTrace                           .doTrace
## 52                              .doWrap                            .doWrap
## 53                             .dynLibs                           .dynLibs
## 54              .encode_numeric_version            .encode_numeric_version
## 55               .expand_R_libs_env_var             .expand_R_libs_env_var
## 56                            .External                          .External
## 57                   .External.graphics                 .External.graphics
## 58                           .External2                         .External2
## 59                           .First.sys                         .First.sys
## 60                 .fixupGFortranStderr               .fixupGFortranStderr
## 61                 .fixupGFortranStdout               .fixupGFortranStdout
## 62                        .format.zeros                      .format.zeros
## 63                             .Fortran                           .Fortran
## 64                        .getNamespace                      .getNamespace
## 65                    .getNamespaceInfo                  .getNamespaceInfo
## 66                 .getRequiredPackages               .getRequiredPackages
## 67                .getRequiredPackages2              .getRequiredPackages2
## 68                                  .gt                                .gt
## 69                                 .gtn                               .gtn
## 70                   .handleSimpleError                 .handleSimpleError
## 71                            .Internal                          .Internal
## 72                 .isMethodsDispatchOn               .isMethodsDispatchOn
## 73                              .isOpen                            .isOpen
## 74                           .kappa_tri                         .kappa_tri
## 75                           .kronecker                         .kronecker
## 76                            .libPaths                          .libPaths
## 77                .make_numeric_version              .make_numeric_version
## 78                         .makeMessage                       .makeMessage
## 79                              .mapply                            .mapply
## 80                           .maskedMsg                         .maskedMsg
## 81                  .mergeExportMethods                .mergeExportMethods
## 82                  .mergeImportMethods                .mergeImportMethods
## 83                   .NotYetImplemented                 .NotYetImplemented
## 84                          .NotYetUsed                        .NotYetUsed
## 85                   .OptRequireMethods                 .OptRequireMethods
## 86                            .packages                          .packages
## 87               .packageStartupMessage             .packageStartupMessage
## 88                             .POSIXct                           .POSIXct
## 89                             .POSIXlt                           .POSIXlt
## 90                              .pretty                            .pretty
## 91                           .Primitive                         .Primitive
## 92                           .primTrace                         .primTrace
## 93                         .primUntrace                       .primUntrace
## 94                               .rmpkg                             .rmpkg
## 95                                 .row                               .row
## 96                      .row_names_info                    .row_names_info
## 97                            .rowMeans                          .rowMeans
## 98                        .rowNamesDF<-                      .rowNamesDF<-
## 99                             .rowSums                           .rowSums
## 100                           .S3method                          .S3method
## 101                             .Script                            .Script
## 102                      .set_row_names                     .set_row_names
## 103                .signalSimpleWarning               .signalSimpleWarning
## 104                   .standard_regexps                  .standard_regexps
## 105                             .subset                            .subset
## 106                            .subset2                           .subset2
## 107                      .TAOCP1997init                     .TAOCP1997init
## 108                          .traceback                         .traceback
## 109                 .tryResumeInterrupt                .tryResumeInterrupt
## 110                       .valid.factor                      .valid.factor
## 111                                   /                                  /
## 112                          /.difftime                         /.difftime
## 113                                   :                                  :
## 114                                  ::                                 ::
## 115                                 :::                                :::
## 116                                   @                                  @
## 117                                 @<-                                @<-
## 118                                   [                                  [
## 119                              [.AsIs                             [.AsIs
## 120                        [.data.frame                       [.data.frame
## 121                              [.Date                             [.Date
## 122                          [.difftime                         [.difftime
## 123                             [.Dlist                            [.Dlist
## 124                       [.DLLInfoList                      [.DLLInfoList
## 125                            [.factor                           [.factor
## 126                           [.hexmode                          [.hexmode
## 127                            [.listof                           [.listof
## 128                           [.noquote                          [.noquote
## 129                   [.numeric_version                  [.numeric_version
## 130                           [.octmode                          [.octmode
## 131                           [.POSIXct                          [.POSIXct
## 132                           [.POSIXlt                          [.POSIXlt
## 133                       [.simple.list                      [.simple.list
## 134                             [.table                            [.table
## 135                          [.warnings                         [.warnings
## 136                                  [[                                 [[
## 137                       [[.data.frame                      [[.data.frame
## 138                             [[.Date                            [[.Date
## 139                           [[.factor                          [[.factor
## 140                  [[.numeric_version                 [[.numeric_version
## 141                          [[.POSIXct                         [[.POSIXct
## 142                          [[.POSIXlt                         [[.POSIXlt
## 143                                [[<-                               [[<-
## 144                     [[<-.data.frame                    [[<-.data.frame
## 145                         [[<-.factor                        [[<-.factor
## 146                [[<-.numeric_version               [[<-.numeric_version
## 147                        [[<-.POSIXlt                       [[<-.POSIXlt
## 148                                 [<-                                [<-
## 149                      [<-.data.frame                     [<-.data.frame
## 150                            [<-.Date                           [<-.Date
## 151                        [<-.difftime                       [<-.difftime
## 152                          [<-.factor                         [<-.factor
## 153                 [<-.numeric_version                [<-.numeric_version
## 154                         [<-.POSIXct                        [<-.POSIXct
## 155                         [<-.POSIXlt                        [<-.POSIXlt
## 156                                   ^                                  ^
## 157                                   {                                  {
## 158                                   |                                  |
## 159                           |.hexmode                          |.hexmode
## 160                           |.octmode                          |.octmode
## 161                                  ||                                 ||
## 162                                   ~                                  ~
## 163                                   +                                  +
## 164                              +.Date                             +.Date
## 165                            +.POSIXt                           +.POSIXt
## 166                                   <                                  <
## 167                                  <-                                 <-
## 168                                 <<-                                <<-
## 169                                  <=                                 <=
## 170                                   =                                  =
## 171                                  ==                                 ==
## 172                                   >                                  >
## 173                                  >=                                 >=
## 174                          abbreviate                         abbreviate
## 175                                 abs                                abs
## 176                                acos                               acos
## 177                               acosh                              acosh
## 178               activeBindingFunction              activeBindingFunction
## 179                               addNA                              addNA
## 180                     addTaskCallback                    addTaskCallback
## 181                               agrep                              agrep
## 182                              agrepl                             agrepl
## 183                               alist                              alist
## 184                                 all                                all
## 185                           all.equal                          all.equal
## 186                 all.equal.character                all.equal.character
## 187                   all.equal.default                  all.equal.default
## 188               all.equal.environment              all.equal.environment
## 189               all.equal.envRefClass              all.equal.envRefClass
## 190                    all.equal.factor                   all.equal.factor
## 191                   all.equal.formula                  all.equal.formula
## 192                  all.equal.function                 all.equal.function
## 193                  all.equal.language                 all.equal.language
## 194                      all.equal.list                     all.equal.list
## 195                   all.equal.numeric                  all.equal.numeric
## 196                    all.equal.POSIXt                   all.equal.POSIXt
## 197                       all.equal.raw                      all.equal.raw
## 198                           all.names                          all.names
## 199                            all.vars                           all.vars
## 200                     allowInterrupts                    allowInterrupts
## 201                                 any                                any
## 202                       anyDuplicated                      anyDuplicated
## 203                 anyDuplicated.array                anyDuplicated.array
## 204            anyDuplicated.data.frame           anyDuplicated.data.frame
## 205               anyDuplicated.default              anyDuplicated.default
## 206                anyDuplicated.matrix               anyDuplicated.matrix
## 207                               anyNA                              anyNA
## 208                    anyNA.data.frame                   anyNA.data.frame
## 209               anyNA.numeric_version              anyNA.numeric_version
## 210                       anyNA.POSIXlt                      anyNA.POSIXlt
## 211                               aperm                              aperm
## 212                       aperm.default                      aperm.default
## 213                         aperm.table                        aperm.table
## 214                              append                             append
## 215                               apply                              apply
## 216                                 Arg                                Arg
## 217                                args                               args
## 218                               array                              array
## 219                            arrayInd                           arrayInd
## 220                            as.array                           as.array
## 221                    as.array.default                   as.array.default
## 222                             as.call                            as.call
## 223                        as.character                       as.character
## 224              as.character.condition             as.character.condition
## 225                   as.character.Date                  as.character.Date
## 226                as.character.default               as.character.default
## 227                  as.character.error                 as.character.error
## 228                 as.character.factor                as.character.factor
## 229                as.character.hexmode               as.character.hexmode
## 230        as.character.numeric_version       as.character.numeric_version
## 231                as.character.octmode               as.character.octmode
## 232                 as.character.POSIXt                as.character.POSIXt
## 233                 as.character.srcref                as.character.srcref
## 234                          as.complex                         as.complex
## 235                       as.data.frame                      as.data.frame
## 236                 as.data.frame.array                as.data.frame.array
## 237                  as.data.frame.AsIs                 as.data.frame.AsIs
## 238             as.data.frame.character            as.data.frame.character
## 239               as.data.frame.complex              as.data.frame.complex
## 240            as.data.frame.data.frame           as.data.frame.data.frame
## 241                  as.data.frame.Date                 as.data.frame.Date
## 242               as.data.frame.default              as.data.frame.default
## 243              as.data.frame.difftime             as.data.frame.difftime
## 244                as.data.frame.factor               as.data.frame.factor
## 245               as.data.frame.integer              as.data.frame.integer
## 246                  as.data.frame.list                 as.data.frame.list
## 247               as.data.frame.logical              as.data.frame.logical
## 248                as.data.frame.matrix               as.data.frame.matrix
## 249          as.data.frame.model.matrix         as.data.frame.model.matrix
## 250               as.data.frame.noquote              as.data.frame.noquote
## 251               as.data.frame.numeric              as.data.frame.numeric
## 252       as.data.frame.numeric_version      as.data.frame.numeric_version
## 253               as.data.frame.ordered              as.data.frame.ordered
## 254               as.data.frame.POSIXct              as.data.frame.POSIXct
## 255               as.data.frame.POSIXlt              as.data.frame.POSIXlt
## 256                   as.data.frame.raw                  as.data.frame.raw
## 257                 as.data.frame.table                as.data.frame.table
## 258                    as.data.frame.ts                   as.data.frame.ts
## 259                as.data.frame.vector               as.data.frame.vector
## 260                             as.Date                            as.Date
## 261                   as.Date.character                  as.Date.character
## 262                     as.Date.default                    as.Date.default
## 263                      as.Date.factor                     as.Date.factor
## 264                     as.Date.numeric                    as.Date.numeric
## 265                     as.Date.POSIXct                    as.Date.POSIXct
## 266                     as.Date.POSIXlt                    as.Date.POSIXlt
## 267                         as.difftime                        as.difftime
## 268                           as.double                          as.double
## 269                  as.double.difftime                 as.double.difftime
## 270                   as.double.POSIXlt                  as.double.POSIXlt
## 271                      as.environment                     as.environment
## 272                       as.expression                      as.expression
## 273               as.expression.default              as.expression.default
## 274                           as.factor                          as.factor
## 275                         as.function                        as.function
## 276                 as.function.default                as.function.default
## 277                          as.hexmode                         as.hexmode
## 278                          as.integer                         as.integer
## 279                             as.list                            as.list
## 280                  as.list.data.frame                 as.list.data.frame
## 281                        as.list.Date                       as.list.Date
## 282                     as.list.default                    as.list.default
## 283                    as.list.difftime                   as.list.difftime
## 284                 as.list.environment                as.list.environment
## 285                      as.list.factor                     as.list.factor
## 286                    as.list.function                   as.list.function
## 287             as.list.numeric_version            as.list.numeric_version
## 288                     as.list.POSIXct                    as.list.POSIXct
## 289                     as.list.POSIXlt                    as.list.POSIXlt
## 290                          as.logical                         as.logical
## 291                   as.logical.factor                  as.logical.factor
## 292                           as.matrix                          as.matrix
## 293                as.matrix.data.frame               as.matrix.data.frame
## 294                   as.matrix.default                  as.matrix.default
## 295                   as.matrix.noquote                  as.matrix.noquote
## 296                   as.matrix.POSIXlt                  as.matrix.POSIXlt
## 297                             as.name                            as.name
## 298                             as.null                            as.null
## 299                     as.null.default                    as.null.default
## 300                          as.numeric                         as.numeric
## 301                  as.numeric_version                 as.numeric_version
## 302                          as.octmode                         as.octmode
## 303                          as.ordered                         as.ordered
## 304                  as.package_version                 as.package_version
## 305                         as.pairlist                        as.pairlist
## 306                          as.POSIXct                         as.POSIXct
## 307                     as.POSIXct.Date                    as.POSIXct.Date
## 308                  as.POSIXct.default                 as.POSIXct.default
## 309                  as.POSIXct.numeric                 as.POSIXct.numeric
## 310                  as.POSIXct.POSIXlt                 as.POSIXct.POSIXlt
## 311                          as.POSIXlt                         as.POSIXlt
## 312                as.POSIXlt.character               as.POSIXlt.character
## 313                     as.POSIXlt.Date                    as.POSIXlt.Date
## 314                  as.POSIXlt.default                 as.POSIXlt.default
## 315                   as.POSIXlt.factor                  as.POSIXlt.factor
## 316                  as.POSIXlt.numeric                 as.POSIXlt.numeric
## 317                  as.POSIXlt.POSIXct                 as.POSIXlt.POSIXct
## 318                               as.qr                              as.qr
## 319                              as.raw                             as.raw
## 320                           as.single                          as.single
## 321                   as.single.default                  as.single.default
## 322                           as.symbol                          as.symbol
## 323                            as.table                           as.table
## 324                    as.table.default                   as.table.default
## 325                           as.vector                          as.vector
## 326                as.vector.data.frame               as.vector.data.frame
## 327                    as.vector.factor                   as.vector.factor
## 328                   as.vector.POSIXlt                  as.vector.POSIXlt
## 329                                asin                               asin
## 330                               asinh                              asinh
## 331                         asNamespace                        asNamespace
## 332                              asplit                             asplit
## 333                                asS3                               asS3
## 334                                asS4                               asS4
## 335                              assign                             assign
## 336                                atan                               atan
## 337                               atan2                              atan2
## 338                               atanh                              atanh
## 339                              attach                             attach
## 340                     attachNamespace                    attachNamespace
## 341                                attr                               attr
## 342                      attr.all.equal                     attr.all.equal
## 343                              attr<-                             attr<-
## 344                          attributes                         attributes
## 345                        attributes<-                       attributes<-
## 346                            autoload                           autoload
## 347                          autoloader                         autoloader
## 348                           backsolve                          backsolve
## 349                             baseenv                            baseenv
## 350                            basename                           basename
## 351                             besselI                            besselI
## 352                             besselJ                            besselJ
## 353                             besselK                            besselK
## 354                             besselY                            besselY
## 355                                beta                               beta
## 356                     bindingIsActive                    bindingIsActive
## 357                     bindingIsLocked                    bindingIsLocked
## 358                      bindtextdomain                     bindtextdomain
## 359                             bitwAnd                            bitwAnd
## 360                             bitwNot                            bitwNot
## 361                              bitwOr                             bitwOr
## 362                          bitwShiftL                         bitwShiftL
## 363                          bitwShiftR                         bitwShiftR
## 364                             bitwXor                            bitwXor
## 365                                body                               body
## 366                              body<-                             body<-
## 367                              bquote                             bquote
## 368                               break                              break
## 369                             browser                            browser
## 370                    browserCondition                   browserCondition
## 371                     browserSetDebug                    browserSetDebug
## 372                         browserText                        browserText
## 373                            builtins                           builtins
## 374                                  by                                 by
## 375                       by.data.frame                      by.data.frame
## 376                          by.default                         by.default
## 377                              bzfile                             bzfile
## 378                                   c                                  c
## 379                              c.Date                             c.Date
## 380                          c.difftime                         c.difftime
## 381                            c.factor                           c.factor
## 382                           c.noquote                          c.noquote
## 383                   c.numeric_version                  c.numeric_version
## 384                           c.POSIXct                          c.POSIXct
## 385                           c.POSIXlt                          c.POSIXlt
## 386                          c.warnings                         c.warnings
## 387                                call                               call
## 388                              callCC                             callCC
## 389                        capabilities                       capabilities
## 390                            casefold                           casefold
## 391                                 cat                                cat
## 392                               cbind                              cbind
## 393                    cbind.data.frame                   cbind.data.frame
## 394                             ceiling                            ceiling
## 395                         char.expand                        char.expand
## 396                           character                          character
## 397                           charmatch                          charmatch
## 398                           charToRaw                          charToRaw
## 399                              chartr                             chartr
## 400                        check_tzones                       check_tzones
## 401                             chkDots                            chkDots
## 402                                chol                               chol
## 403                        chol.default                       chol.default
## 404                            chol2inv                           chol2inv
## 405                              choose                             choose
## 406                               class                              class
## 407                             class<-                            class<-
## 408                       clearPushBack                      clearPushBack
## 409                               close                              close
## 410                    close.connection                   close.connection
## 411                       close.srcfile                      close.srcfile
## 412                  close.srcfilealias                 close.srcfilealias
## 413                 closeAllConnections                closeAllConnections
## 414                                 col                                col
## 415                            colMeans                           colMeans
## 416                            colnames                           colnames
## 417                          colnames<-                         colnames<-
## 418                             colSums                            colSums
## 419                         commandArgs                        commandArgs
## 420                             comment                            comment
## 421                           comment<-                          comment<-
## 422                             complex                            complex
## 423                     computeRestarts                    computeRestarts
## 424                       conditionCall                      conditionCall
## 425             conditionCall.condition            conditionCall.condition
## 426                    conditionMessage                   conditionMessage
## 427          conditionMessage.condition         conditionMessage.condition
## 428                       conflictRules                      conflictRules
## 429                           conflicts                          conflicts
## 430                                Conj                               Conj
## 431                        contributors                       contributors
## 432                                 cos                                cos
## 433                                cosh                               cosh
## 434                               cospi                              cospi
## 435                           crossprod                          crossprod
## 436                         Cstack_info                        Cstack_info
## 437                              cummax                             cummax
## 438                              cummin                             cummin
## 439                             cumprod                            cumprod
## 440                              cumsum                             cumsum
## 441                      curlGetHeaders                     curlGetHeaders
## 442                                 cut                                cut
## 443                            cut.Date                           cut.Date
## 444                         cut.default                        cut.default
## 445                          cut.POSIXt                         cut.POSIXt
## 446                          data.class                         data.class
## 447                          data.frame                         data.frame
## 448                         data.matrix                        data.matrix
## 449                                date                               date
## 450                               debug                              debug
## 451                      debuggingState                     debuggingState
## 452                           debugonce                          debugonce
## 453            default.stringsAsFactors           default.stringsAsFactors
## 454                       delayedAssign                      delayedAssign
## 455                             deparse                            deparse
## 456                            deparse1                           deparse1
## 457                                 det                                det
## 458                              detach                             detach
## 459                         determinant                        determinant
## 460                  determinant.matrix                 determinant.matrix
## 461                                dget                               dget
## 462                                diag                               diag
## 463                              diag<-                             diag<-
## 464                                diff                               diff
## 465                           diff.Date                          diff.Date
## 466                        diff.default                       diff.default
## 467                       diff.difftime                      diff.difftime
## 468                         diff.POSIXt                        diff.POSIXt
## 469                            difftime                           difftime
## 470                             digamma                            digamma
## 471                                 dim                                dim
## 472                      dim.data.frame                     dim.data.frame
## 473                               dim<-                              dim<-
## 474                            dimnames                           dimnames
## 475                 dimnames.data.frame                dimnames.data.frame
## 476                          dimnames<-                         dimnames<-
## 477               dimnames<-.data.frame              dimnames<-.data.frame
## 478                                 dir                                dir
## 479                          dir.create                         dir.create
## 480                          dir.exists                         dir.exists
## 481                             dirname                            dirname
## 482                             do.call                            do.call
## 483                           dontCheck                          dontCheck
## 484                              double                             double
## 485                                dput                               dput
## 486                              dQuote                             dQuote
## 487                                drop                               drop
## 488                          droplevels                         droplevels
## 489               droplevels.data.frame              droplevels.data.frame
## 490                   droplevels.factor                  droplevels.factor
## 491                                dump                               dump
## 492                          duplicated                         duplicated
## 493                    duplicated.array                   duplicated.array
## 494               duplicated.data.frame              duplicated.data.frame
## 495                  duplicated.default                 duplicated.default
## 496                   duplicated.matrix                  duplicated.matrix
## 497          duplicated.numeric_version         duplicated.numeric_version
## 498                  duplicated.POSIXlt                 duplicated.POSIXlt
## 499                 duplicated.warnings                duplicated.warnings
## 500                            dyn.load                           dyn.load
## 501                          dyn.unload                         dyn.unload
## 502                              dynGet                             dynGet
## 503                              eapply                             eapply
## 504                               eigen                              eigen
## 505                            emptyenv                           emptyenv
## 506                          enc2native                         enc2native
## 507                            enc2utf8                           enc2utf8
## 508                        encodeString                       encodeString
## 509                            Encoding                           Encoding
## 510                          Encoding<-                         Encoding<-
## 511                            endsWith                           endsWith
## 512                             enquote                            enquote
## 513                         env.profile                        env.profile
## 514                         environment                        environment
## 515                       environment<-                      environment<-
## 516                 environmentIsLocked                environmentIsLocked
## 517                     environmentName                    environmentName
## 518                      errorCondition                     errorCondition
## 519                                eval                               eval
## 520                         eval.parent                        eval.parent
## 521                               evalq                              evalq
## 522                              exists                             exists
## 523                                 exp                                exp
## 524                         expand.grid                        expand.grid
## 525                               expm1                              expm1
## 526                          expression                         expression
## 527                      extSoftVersion                     extSoftVersion
## 528                              factor                             factor
## 529                           factorial                          factorial
## 530                                fifo                               fifo
## 531                                file                               file
## 532                         file.access                        file.access
## 533                         file.append                        file.append
## 534                         file.choose                        file.choose
## 535                           file.copy                          file.copy
## 536                         file.create                        file.create
## 537                         file.exists                        file.exists
## 538                           file.info                          file.info
## 539                           file.link                          file.link
## 540                           file.mode                          file.mode
## 541                          file.mtime                         file.mtime
## 542                           file.path                          file.path
## 543                         file.remove                        file.remove
## 544                         file.rename                        file.rename
## 545                           file.show                          file.show
## 546                           file.size                          file.size
## 547                        file.symlink                       file.symlink
## 548                              Filter                             Filter
## 549                                Find                               Find
## 550                        find.package                       find.package
## 551                        findInterval                       findInterval
## 552                      findPackageEnv                     findPackageEnv
## 553                         findRestart                        findRestart
## 554                               floor                              floor
## 555                               flush                              flush
## 556                    flush.connection                   flush.connection
## 557                                 for                                for
## 558                               force                              force
## 559                        forceAndCall                       forceAndCall
## 560                             formals                            formals
## 561                           formals<-                          formals<-
## 562                              format                             format
## 563                         format.AsIs                        format.AsIs
## 564                   format.data.frame                  format.data.frame
## 565                         format.Date                        format.Date
## 566                      format.default                     format.default
## 567                     format.difftime                    format.difftime
## 568                       format.factor                      format.factor
## 569                      format.hexmode                     format.hexmode
## 570                         format.info                        format.info
## 571                   format.libraryIQR                  format.libraryIQR
## 572              format.numeric_version             format.numeric_version
## 573                      format.octmode                     format.octmode
## 574                  format.packageInfo                 format.packageInfo
## 575                      format.POSIXct                     format.POSIXct
## 576                      format.POSIXlt                     format.POSIXlt
## 577                         format.pval                        format.pval
## 578               format.summaryDefault              format.summaryDefault
## 579                             formatC                            formatC
## 580                            formatDL                           formatDL
## 581                        forwardsolve                       forwardsolve
## 582                            function                           function
## 583                               gamma                              gamma
## 584                                  gc                                 gc
## 585                             gc.time                            gc.time
## 586                              gcinfo                             gcinfo
## 587                           gctorture                          gctorture
## 588                          gctorture2                         gctorture2
## 589                                 get                                get
## 590                                get0                               get0
## 591                   getAllConnections                  getAllConnections
## 592                       getCallingDLL                      getCallingDLL
## 593                      getCallingDLLe                     getCallingDLLe
## 594                       getConnection                      getConnection
## 595            getDLLRegisteredRoutines           getDLLRegisteredRoutines
## 596  getDLLRegisteredRoutines.character getDLLRegisteredRoutines.character
## 597    getDLLRegisteredRoutines.DLLInfo   getDLLRegisteredRoutines.DLLInfo
## 598                          getElement                         getElement
## 599                       geterrmessage                      geterrmessage
## 600                    getExportedValue                   getExportedValue
## 601                             getHook                            getHook
## 602                       getLoadedDLLs                      getLoadedDLLs
## 603                        getNamespace                       getNamespace
## 604                 getNamespaceExports                getNamespaceExports
## 605                 getNamespaceImports                getNamespaceImports
## 606                    getNamespaceInfo                   getNamespaceInfo
## 607                    getNamespaceName                   getNamespaceName
## 608                   getNamespaceUsers                  getNamespaceUsers
## 609                 getNamespaceVersion                getNamespaceVersion
## 610                 getNativeSymbolInfo                getNativeSymbolInfo
## 611                           getOption                          getOption
## 612                         getRversion                        getRversion
## 613                         getSrcLines                        getSrcLines
## 614                getTaskCallbackNames               getTaskCallbackNames
## 615                             gettext                            gettext
## 616                            gettextf                           gettextf
## 617                               getwd                              getwd
## 618                                  gl                                 gl
## 619               globalCallingHandlers              globalCallingHandlers
## 620                           globalenv                          globalenv
## 621                            gregexec                           gregexec
## 622                            gregexpr                           gregexpr
## 623                                grep                               grep
## 624                               grepl                              grepl
## 625                             grepRaw                            grepRaw
## 626                            grouping                           grouping
## 627                                gsub                               gsub
## 628                               gzcon                              gzcon
## 629                              gzfile                             gzfile
## 630                                   I                                  I
## 631                               iconv                              iconv
## 632                           iconvlist                          iconvlist
## 633                       icuGetCollate                      icuGetCollate
## 634                       icuSetCollate                      icuSetCollate
## 635                           identical                          identical
## 636                            identity                           identity
## 637                                  if                                 if
## 638                              ifelse                             ifelse
## 639                                  Im                                 Im
## 640                       importIntoEnv                      importIntoEnv
## 641                             infoRDS                            infoRDS
## 642                            inherits                           inherits
## 643                             integer                            integer
## 644                         interaction                        interaction
## 645                         interactive                        interactive
## 646                           intersect                          intersect
## 647                           intToBits                          intToBits
## 648                           intToUtf8                          intToUtf8
## 649                         inverse.rle                        inverse.rle
## 650                           invisible                          invisible
## 651                       invokeRestart                      invokeRestart
## 652          invokeRestartInteractively         invokeRestartInteractively
## 653                            is.array                           is.array
## 654                           is.atomic                          is.atomic
## 655                             is.call                            is.call
## 656                        is.character                       is.character
## 657                          is.complex                         is.complex
## 658                       is.data.frame                      is.data.frame
## 659                           is.double                          is.double
## 660                          is.element                         is.element
## 661                      is.environment                     is.environment
## 662                       is.expression                      is.expression
## 663                           is.factor                          is.factor
## 664                           is.finite                          is.finite
## 665                         is.function                        is.function
## 666                         is.infinite                        is.infinite
## 667                          is.integer                         is.integer
## 668                         is.language                        is.language
## 669                             is.list                            is.list
## 670                           is.loaded                          is.loaded
## 671                          is.logical                         is.logical
## 672                           is.matrix                          is.matrix
## 673                               is.na                              is.na
## 674                    is.na.data.frame                   is.na.data.frame
## 675               is.na.numeric_version              is.na.numeric_version
## 676                       is.na.POSIXlt                      is.na.POSIXlt
## 677                             is.na<-                            is.na<-
## 678                     is.na<-.default                    is.na<-.default
## 679                      is.na<-.factor                     is.na<-.factor
## 680             is.na<-.numeric_version            is.na<-.numeric_version
## 681                             is.name                            is.name
## 682                              is.nan                             is.nan
## 683                             is.null                            is.null
## 684                          is.numeric                         is.numeric
## 685                     is.numeric.Date                    is.numeric.Date
## 686                 is.numeric.difftime                is.numeric.difftime
## 687                   is.numeric.POSIXt                  is.numeric.POSIXt
## 688                  is.numeric_version                 is.numeric_version
## 689                           is.object                          is.object
## 690                          is.ordered                         is.ordered
## 691                  is.package_version                 is.package_version
## 692                         is.pairlist                        is.pairlist
## 693                        is.primitive                       is.primitive
## 694                               is.qr                              is.qr
## 695                                is.R                               is.R
## 696                              is.raw                             is.raw
## 697                        is.recursive                       is.recursive
## 698                           is.single                          is.single
## 699                           is.symbol                          is.symbol
## 700                            is.table                           is.table
## 701                         is.unsorted                        is.unsorted
## 702                           is.vector                          is.vector
## 703                                 isa                                isa
## 704                              isatty                             isatty
## 705                     isBaseNamespace                    isBaseNamespace
## 706                          isdebugged                         isdebugged
## 707                             isFALSE                            isFALSE
## 708                        isIncomplete                       isIncomplete
## 709                         isNamespace                        isNamespace
## 710                   isNamespaceLoaded                  isNamespaceLoaded
## 711                             ISOdate                            ISOdate
## 712                         ISOdatetime                        ISOdatetime
## 713                              isOpen                             isOpen
## 714                           isRestart                          isRestart
## 715                                isS4                               isS4
## 716                          isSeekable                         isSeekable
## 717                         isSymmetric                        isSymmetric
## 718                  isSymmetric.matrix                 isSymmetric.matrix
## 719                              isTRUE                             isTRUE
## 720                              jitter                             jitter
## 721                              julian                             julian
## 722                         julian.Date                        julian.Date
## 723                       julian.POSIXt                      julian.POSIXt
## 724                               kappa                              kappa
## 725                       kappa.default                      kappa.default
## 726                            kappa.lm                           kappa.lm
## 727                            kappa.qr                           kappa.qr
## 728                           kronecker                          kronecker
## 729                           l10n_info                          l10n_info
## 730                              La.svd                             La.svd
## 731                          La_library                         La_library
## 732                          La_version                         La_version
## 733                              labels                             labels
## 734                      labels.default                     labels.default
## 735                              lapply                             lapply
## 736                            lazyLoad                           lazyLoad
## 737                      lazyLoadDBexec                     lazyLoadDBexec
## 738                     lazyLoadDBfetch                    lazyLoadDBfetch
## 739                               lbeta                              lbeta
## 740                             lchoose                            lchoose
## 741                              length                             length
## 742                      length.POSIXlt                     length.POSIXlt
## 743                            length<-                           length<-
## 744                       length<-.Date                      length<-.Date
## 745                   length<-.difftime                  length<-.difftime
## 746                     length<-.factor                    length<-.factor
## 747                    length<-.POSIXct                   length<-.POSIXct
## 748                    length<-.POSIXlt                   length<-.POSIXlt
## 749                             lengths                            lengths
## 750                              levels                             levels
## 751                      levels.default                     levels.default
## 752                            levels<-                           levels<-
## 753                     levels<-.factor                    levels<-.factor
## 754                          lfactorial                         lfactorial
## 755                              lgamma                             lgamma
## 756                      libcurlVersion                     libcurlVersion
## 757                             library                            library
## 758                       library.dynam                      library.dynam
## 759                library.dynam.unload               library.dynam.unload
## 760                             licence                            licence
## 761                             license                            license
## 762                                list                               list
## 763                           list.dirs                          list.dirs
## 764                          list.files                         list.files
## 765                             list2DF                            list2DF
## 766                            list2env                           list2env
## 767                                load                               load
## 768                    loadedNamespaces                   loadedNamespaces
## 769                loadingNamespaceInfo               loadingNamespaceInfo
## 770                       loadNamespace                      loadNamespace
## 771                               local                              local
## 772                         lockBinding                        lockBinding
## 773                     lockEnvironment                    lockEnvironment
## 774                                 log                                log
## 775                               log10                              log10
## 776                               log1p                              log1p
## 777                                log2                               log2
## 778                                logb                               logb
## 779                             logical                            logical
## 780                           lower.tri                          lower.tri
## 781                                  ls                                 ls
## 782                          make.names                         make.names
## 783                         make.unique                        make.unique
## 784                   makeActiveBinding                  makeActiveBinding
## 785                                 Map                                Map
## 786                              mapply                             mapply
## 787                        margin.table                       margin.table
## 788                          marginSums                         marginSums
## 789                          mat.or.vec                         mat.or.vec
## 790                               match                              match
## 791                           match.arg                          match.arg
## 792                          match.call                         match.call
## 793                           match.fun                          match.fun
## 794                     Math.data.frame                    Math.data.frame
## 795                           Math.Date                          Math.Date
## 796                       Math.difftime                      Math.difftime
## 797                         Math.factor                        Math.factor
## 798                         Math.POSIXt                        Math.POSIXt
## 799                              matrix                             matrix
## 800                                 max                                max
## 801                             max.col                            max.col
## 802                                mean                               mean
## 803                           mean.Date                          mean.Date
## 804                        mean.default                       mean.default
## 805                       mean.difftime                      mean.difftime
## 806                        mean.POSIXct                       mean.POSIXct
## 807                        mean.POSIXlt                       mean.POSIXlt
## 808                        mem.maxNSize                       mem.maxNSize
## 809                        mem.maxVSize                       mem.maxVSize
## 810                         memCompress                        memCompress
## 811                       memDecompress                      memDecompress
## 812                      memory.profile                     memory.profile
## 813                               merge                              merge
## 814                    merge.data.frame                   merge.data.frame
## 815                       merge.default                      merge.default
## 816                             message                            message
## 817                                mget                               mget
## 818                                 min                                min
## 819                             missing                            missing
## 820                                 Mod                                Mod
## 821                                mode                               mode
## 822                              mode<-                             mode<-
## 823                              months                             months
## 824                         months.Date                        months.Date
## 825                       months.POSIXt                      months.POSIXt
## 826                    mostattributes<-                   mostattributes<-
## 827                               mtfrm                              mtfrm
## 828                       mtfrm.default                      mtfrm.default
## 829                               names                              names
## 830                       names.POSIXlt                      names.POSIXlt
## 831                             names<-                            names<-
## 832                     names<-.POSIXlt                    names<-.POSIXlt
## 833                     namespaceExport                    namespaceExport
## 834                     namespaceImport                    namespaceImport
## 835              namespaceImportClasses             namespaceImportClasses
## 836                 namespaceImportFrom                namespaceImportFrom
## 837              namespaceImportMethods             namespaceImportMethods
## 838                               nargs                              nargs
## 839                               nchar                              nchar
## 840                                ncol                               ncol
## 841                                NCOL                               NCOL
## 842                              Negate                             Negate
## 843                             new.env                            new.env
## 844                                next                               next
## 845                          NextMethod                         NextMethod
## 846                            ngettext                           ngettext
## 847                             nlevels                            nlevels
## 848                             noquote                            noquote
## 849                                norm                               norm
## 850                       normalizePath                      normalizePath
## 851                                nrow                               nrow
## 852                                NROW                               NROW
## 853                            nullfile                           nullfile
## 854                             numeric                            numeric
## 855                     numeric_version                    numeric_version
## 856                           numToBits                          numToBits
## 857                           numToInts                          numToInts
## 858                              nzchar                             nzchar
## 859                             objects                            objects
## 860                            oldClass                           oldClass
## 861                          oldClass<-                         oldClass<-
## 862                          OlsonNames                         OlsonNames
## 863                             on.exit                            on.exit
## 864                                open                               open
## 865                     open.connection                    open.connection
## 866                        open.srcfile                       open.srcfile
## 867                   open.srcfilealias                  open.srcfilealias
## 868                    open.srcfilecopy                   open.srcfilecopy
## 869                      Ops.data.frame                     Ops.data.frame
## 870                            Ops.Date                           Ops.Date
## 871                        Ops.difftime                       Ops.difftime
## 872                          Ops.factor                         Ops.factor
## 873                 Ops.numeric_version                Ops.numeric_version
## 874                         Ops.ordered                        Ops.ordered
## 875                          Ops.POSIXt                         Ops.POSIXt
## 876                             options                            options
## 877                               order                              order
## 878                             ordered                            ordered
## 879                               outer                              outer
## 880                     package_version                    package_version
## 881                        packageEvent                       packageEvent
## 882                 packageHasNamespace                packageHasNamespace
## 883                packageNotFoundError               packageNotFoundError
## 884               packageStartupMessage              packageStartupMessage
## 885                            packBits                           packBits
## 886                            pairlist                           pairlist
## 887                          parent.env                         parent.env
## 888                        parent.env<-                       parent.env<-
## 889                        parent.frame                       parent.frame
## 890                               parse                              parse
## 891                  parseNamespaceFile                 parseNamespaceFile
## 892                               paste                              paste
## 893                              paste0                             paste0
## 894                         path.expand                        path.expand
## 895                        path.package                       path.package
## 896                         pcre_config                        pcre_config
## 897                                pipe                               pipe
## 898                                plot                               plot
## 899                              pmatch                             pmatch
## 900                                pmax                               pmax
## 901                            pmax.int                           pmax.int
## 902                                pmin                               pmin
## 903                            pmin.int                           pmin.int
## 904                            polyroot                           polyroot
## 905                          pos.to.env                         pos.to.env
## 906                            Position                           Position
## 907                              pretty                             pretty
## 908                      pretty.default                     pretty.default
## 909                           prettyNum                          prettyNum
## 910                               print                              print
## 911                          print.AsIs                         print.AsIs
## 912                            print.by                           print.by
## 913                     print.condition                    print.condition
## 914                    print.connection                   print.connection
## 915                    print.data.frame                   print.data.frame
## 916                          print.Date                         print.Date
## 917                       print.default                      print.default
## 918                      print.difftime                     print.difftime
## 919                         print.Dlist                        print.Dlist
## 920                       print.DLLInfo                      print.DLLInfo
## 921                   print.DLLInfoList                  print.DLLInfoList
## 922         print.DLLRegisteredRoutines        print.DLLRegisteredRoutines
## 923                         print.eigen                        print.eigen
## 924                        print.factor                       print.factor
## 925                      print.function                     print.function
## 926                       print.hexmode                      print.hexmode
## 927                    print.libraryIQR                   print.libraryIQR
## 928                        print.listof                       print.listof
## 929             print.NativeRoutineList            print.NativeRoutineList
## 930                       print.noquote                      print.noquote
## 931               print.numeric_version              print.numeric_version
## 932                       print.octmode                      print.octmode
## 933                   print.packageInfo                  print.packageInfo
## 934                       print.POSIXct                      print.POSIXct
## 935                       print.POSIXlt                      print.POSIXlt
## 936                     print.proc_time                    print.proc_time
## 937                       print.restart                      print.restart
## 938                           print.rle                          print.rle
## 939                   print.simple.list                  print.simple.list
## 940                       print.srcfile                      print.srcfile
## 941                        print.srcref                       print.srcref
## 942                 print.summary.table                print.summary.table
## 943              print.summary.warnings             print.summary.warnings
## 944                print.summaryDefault               print.summaryDefault
## 945                         print.table                        print.table
## 946                      print.warnings                     print.warnings
## 947                            prmatrix                           prmatrix
## 948                           proc.time                          proc.time
## 949                                prod                               prod
## 950                          prop.table                         prop.table
## 951                         proportions                        proportions
## 952                     provideDimnames                    provideDimnames
## 953                            psigamma                           psigamma
## 954                            pushBack                           pushBack
## 955                      pushBackLength                     pushBackLength
## 956                                   q                                  q
## 957                                  qr                                 qr
## 958                             qr.coef                            qr.coef
## 959                          qr.default                         qr.default
## 960                           qr.fitted                          qr.fitted
## 961                                qr.Q                               qr.Q
## 962                              qr.qty                             qr.qty
## 963                               qr.qy                              qr.qy
## 964                                qr.R                               qr.R
## 965                            qr.resid                           qr.resid
## 966                            qr.solve                           qr.solve
## 967                                qr.X                               qr.X
## 968                            quarters                           quarters
## 969                       quarters.Date                      quarters.Date
## 970                     quarters.POSIXt                    quarters.POSIXt
## 971                                quit                               quit
## 972                               quote                              quote
## 973                              R.home                             R.home
## 974                           R.Version                          R.Version
## 975                    R_system_version                   R_system_version
## 976                               range                              range
## 977                       range.default                      range.default
## 978                                rank                               rank
## 979                              rapply                             rapply
## 980                                 raw                                raw
## 981                       rawConnection                      rawConnection
## 982                  rawConnectionValue                 rawConnectionValue
## 983                            rawShift                           rawShift
## 984                           rawToBits                          rawToBits
## 985                           rawToChar                          rawToChar
## 986                               rbind                              rbind
## 987                    rbind.data.frame                   rbind.data.frame
## 988                               rcond                              rcond
## 989                                  Re                                 Re
## 990                            read.dcf                           read.dcf
## 991                             readBin                            readBin
## 992                            readChar                           readChar
## 993                            readline                           readline
## 994                           readLines                          readLines
## 995                             readRDS                            readRDS
## 996                        readRenviron                       readRenviron
## 997                              Recall                             Recall
## 998                              Reduce                             Reduce
## 999                       reg.finalizer                      reg.finalizer
## 1000                            regexec                            regexec
## 1001                            regexpr                            regexpr
## 1002                   registerS3method                   registerS3method
## 1003                  registerS3methods                  registerS3methods
## 1004                         regmatches                         regmatches
## 1005                       regmatches<-                       regmatches<-
## 1006                             remove                             remove
## 1007                 removeTaskCallback                 removeTaskCallback
## 1008                                rep                                rep
## 1009                           rep.Date                           rep.Date
## 1010                       rep.difftime                       rep.difftime
## 1011                         rep.factor                         rep.factor
## 1012                            rep.int                            rep.int
## 1013                rep.numeric_version                rep.numeric_version
## 1014                        rep.POSIXct                        rep.POSIXct
## 1015                        rep.POSIXlt                        rep.POSIXlt
## 1016                            rep_len                            rep_len
## 1017                             repeat                             repeat
## 1018                            replace                            replace
## 1019                          replicate                          replicate
## 1020                            require                            require
## 1021                   requireNamespace                   requireNamespace
## 1022                 restartDescription                 restartDescription
## 1023                     restartFormals                     restartFormals
## 1024                         retracemem                         retracemem
## 1025                             return                             return
## 1026                        returnValue                        returnValue
## 1027                                rev                                rev
## 1028                        rev.default                        rev.default
## 1029                                rle                                rle
## 1030                                 rm                                 rm
## 1031                            RNGkind                            RNGkind
## 1032                         RNGversion                         RNGversion
## 1033                              round                              round
## 1034                         round.Date                         round.Date
## 1035                       round.POSIXt                       round.POSIXt
## 1036                                row                                row
## 1037                          row.names                          row.names
## 1038               row.names.data.frame               row.names.data.frame
## 1039                  row.names.default                  row.names.default
## 1040                        row.names<-                        row.names<-
## 1041             row.names<-.data.frame             row.names<-.data.frame
## 1042                row.names<-.default                row.names<-.default
## 1043                           rowMeans                           rowMeans
## 1044                           rownames                           rownames
## 1045                         rownames<-                         rownames<-
## 1046                             rowsum                             rowsum
## 1047                  rowsum.data.frame                  rowsum.data.frame
## 1048                     rowsum.default                     rowsum.default
## 1049                            rowSums                            rowSums
## 1050                             sample                             sample
## 1051                         sample.int                         sample.int
## 1052                             sapply                             sapply
## 1053                               save                               save
## 1054                         save.image                         save.image
## 1055                            saveRDS                            saveRDS
## 1056                              scale                              scale
## 1057                      scale.default                      scale.default
## 1058                               scan                               scan
## 1059                             search                             search
## 1060                        searchpaths                        searchpaths
## 1061                               seek                               seek
## 1062                    seek.connection                    seek.connection
## 1063                                seq                                seq
## 1064                           seq.Date                           seq.Date
## 1065                        seq.default                        seq.default
## 1066                            seq.int                            seq.int
## 1067                         seq.POSIXt                         seq.POSIXt
## 1068                          seq_along                          seq_along
## 1069                            seq_len                            seq_len
## 1070                           sequence                           sequence
## 1071                   sequence.default                   sequence.default
## 1072                          serialize                          serialize
## 1073                       serverSocket                       serverSocket
## 1074                           set.seed                           set.seed
## 1075                            setdiff                            setdiff
## 1076                           setequal                           setequal
## 1077                            setHook                            setHook
## 1078                   setNamespaceInfo                   setNamespaceInfo
## 1079                setSessionTimeLimit                setSessionTimeLimit
## 1080                       setTimeLimit                       setTimeLimit
## 1081                              setwd                              setwd
## 1082                              shell                              shell
## 1083                         shell.exec                         shell.exec
## 1084                    showConnections                    showConnections
## 1085                            shQuote                            shQuote
## 1086                               sign                               sign
## 1087                    signalCondition                    signalCondition
## 1088                             signif                             signif
## 1089                    simpleCondition                    simpleCondition
## 1090                        simpleError                        simpleError
## 1091                      simpleMessage                      simpleMessage
## 1092                      simpleWarning                      simpleWarning
## 1093                     simplify2array                     simplify2array
## 1094                                sin                                sin
## 1095                             single                             single
## 1096                               sinh                               sinh
## 1097                               sink                               sink
## 1098                        sink.number                        sink.number
## 1099                              sinpi                              sinpi
## 1100                        slice.index                        slice.index
## 1101                       socketAccept                       socketAccept
## 1102                   socketConnection                   socketConnection
## 1103                       socketSelect                       socketSelect
## 1104                      socketTimeout                      socketTimeout
## 1105                              solve                              solve
## 1106                      solve.default                      solve.default
## 1107                           solve.qr                           solve.qr
## 1108                               sort                               sort
## 1109                       sort.default                       sort.default
## 1110                           sort.int                           sort.int
## 1111                          sort.list                          sort.list
## 1112                       sort.POSIXlt                       sort.POSIXlt
## 1113                             source                             source
## 1114                              split                              split
## 1115                   split.data.frame                   split.data.frame
## 1116                         split.Date                         split.Date
## 1117                      split.default                      split.default
## 1118                      split.POSIXct                      split.POSIXct
## 1119                            split<-                            split<-
## 1120                 split<-.data.frame                 split<-.data.frame
## 1121                    split<-.default                    split<-.default
## 1122                            sprintf                            sprintf
## 1123                               sqrt                               sqrt
## 1124                             sQuote                             sQuote
## 1125                            srcfile                            srcfile
## 1126                       srcfilealias                       srcfilealias
## 1127                        srcfilecopy                        srcfilecopy
## 1128                             srcref                             srcref
## 1129                    standardGeneric                    standardGeneric
## 1130                         startsWith                         startsWith
## 1131                             stderr                             stderr
## 1132                              stdin                              stdin
## 1133                             stdout                             stdout
## 1134                               stop                               stop
## 1135                          stopifnot                          stopifnot
## 1136                       storage.mode                       storage.mode
## 1137                     storage.mode<-                     storage.mode<-
## 1138                     str2expression                     str2expression
## 1139                           str2lang                           str2lang
## 1140                           strftime                           strftime
## 1141                           strptime                           strptime
## 1142                             strrep                             strrep
## 1143                           strsplit                           strsplit
## 1144                             strtoi                             strtoi
## 1145                            strtrim                            strtrim
## 1146                          structure                          structure
## 1147                            strwrap                            strwrap
## 1148                                sub                                sub
## 1149                             subset                             subset
## 1150                  subset.data.frame                  subset.data.frame
## 1151                     subset.default                     subset.default
## 1152                      subset.matrix                      subset.matrix
## 1153                         substitute                         substitute
## 1154                             substr                             substr
## 1155                           substr<-                           substr<-
## 1156                          substring                          substring
## 1157                        substring<-                        substring<-
## 1158                                sum                                sum
## 1159                            summary                            summary
## 1160                 summary.connection                 summary.connection
## 1161                 summary.data.frame                 summary.data.frame
## 1162                 Summary.data.frame                 Summary.data.frame
## 1163                       summary.Date                       summary.Date
## 1164                       Summary.Date                       Summary.Date
## 1165                    summary.default                    summary.default
## 1166                   Summary.difftime                   Summary.difftime
## 1167                     summary.factor                     summary.factor
## 1168                     Summary.factor                     Summary.factor
## 1169                     summary.matrix                     summary.matrix
## 1170            Summary.numeric_version            Summary.numeric_version
## 1171                    Summary.ordered                    Summary.ordered
## 1172                    summary.POSIXct                    summary.POSIXct
## 1173                    Summary.POSIXct                    Summary.POSIXct
## 1174                    summary.POSIXlt                    summary.POSIXlt
## 1175                    Summary.POSIXlt                    Summary.POSIXlt
## 1176                  summary.proc_time                  summary.proc_time
## 1177                    summary.srcfile                    summary.srcfile
## 1178                     summary.srcref                     summary.srcref
## 1179                      summary.table                      summary.table
## 1180                   summary.warnings                   summary.warnings
## 1181                   suppressMessages                   suppressMessages
## 1182     suppressPackageStartupMessages     suppressPackageStartupMessages
## 1183                   suppressWarnings                   suppressWarnings
## 1184                  suspendInterrupts                  suspendInterrupts
## 1185                                svd                                svd
## 1186                              sweep                              sweep
## 1187                             switch                             switch
## 1188                           sys.call                           sys.call
## 1189                          sys.calls                          sys.calls
## 1190                          Sys.chmod                          Sys.chmod
## 1191                           Sys.Date                           Sys.Date
## 1192                          sys.frame                          sys.frame
## 1193                         sys.frames                         sys.frames
## 1194                       sys.function                       sys.function
## 1195                         Sys.getenv                         Sys.getenv
## 1196                      Sys.getlocale                      Sys.getlocale
## 1197                         Sys.getpid                         Sys.getpid
## 1198                           Sys.glob                           Sys.glob
## 1199                           Sys.info                           Sys.info
## 1200                       Sys.junction                       Sys.junction
## 1201                     sys.load.image                     sys.load.image
## 1202                     Sys.localeconv                     Sys.localeconv
## 1203                         sys.nframe                         sys.nframe
## 1204                        sys.on.exit                        sys.on.exit
## 1205                         sys.parent                         sys.parent
## 1206                        sys.parents                        sys.parents
## 1207                       Sys.readlink                       Sys.readlink
## 1208                     sys.save.image                     sys.save.image
## 1209                         Sys.setenv                         Sys.setenv
## 1210                    Sys.setFileTime                    Sys.setFileTime
## 1211                    Sys.setLanguage                    Sys.setLanguage
## 1212                      Sys.setlocale                      Sys.setlocale
## 1213                          Sys.sleep                          Sys.sleep
## 1214                         sys.source                         sys.source
## 1215                         sys.status                         sys.status
## 1216                           Sys.time                           Sys.time
## 1217                       Sys.timezone                       Sys.timezone
## 1218                          Sys.umask                          Sys.umask
## 1219                       Sys.unsetenv                       Sys.unsetenv
## 1220                          Sys.which                          Sys.which
## 1221                             system                             system
## 1222                        system.file                        system.file
## 1223                        system.time                        system.time
## 1224                            system2                            system2
## 1225                                  t                                  t
## 1226                       t.data.frame                       t.data.frame
## 1227                          t.default                          t.default
## 1228                              table                              table
## 1229                           tabulate                           tabulate
## 1230                                tan                                tan
## 1231                               tanh                               tanh
## 1232                              tanpi                              tanpi
## 1233                             tapply                             tapply
## 1234                taskCallbackManager                taskCallbackManager
## 1235                         tcrossprod                         tcrossprod
## 1236                            tempdir                            tempdir
## 1237                           tempfile                           tempfile
## 1238                     textConnection                     textConnection
## 1239                textConnectionValue                textConnectionValue
## 1240                            tolower                            tolower
## 1241                             topenv                             topenv
## 1242                           toString                           toString
## 1243                   toString.default                   toString.default
## 1244                            toupper                            toupper
## 1245                              trace                              trace
## 1246                          traceback                          traceback
## 1247                           tracemem                           tracemem
## 1248                       tracingState                       tracingState
## 1249                          transform                          transform
## 1250               transform.data.frame               transform.data.frame
## 1251                  transform.default                  transform.default
## 1252                           trigamma                           trigamma
## 1253                             trimws                             trimws
## 1254                              trunc                              trunc
## 1255                         trunc.Date                         trunc.Date
## 1256                       trunc.POSIXt                       trunc.POSIXt
## 1257                           truncate                           truncate
## 1258                truncate.connection                truncate.connection
## 1259                                try                                try
## 1260                           tryCatch                           tryCatch
## 1261                   tryInvokeRestart                   tryInvokeRestart
## 1262                             typeof                             typeof
## 1263                            unclass                            unclass
## 1264                            undebug                            undebug
## 1265                              union                              union
## 1266                             unique                             unique
## 1267                       unique.array                       unique.array
## 1268                  unique.data.frame                  unique.data.frame
## 1269                     unique.default                     unique.default
## 1270                      unique.matrix                      unique.matrix
## 1271             unique.numeric_version             unique.numeric_version
## 1272                     unique.POSIXlt                     unique.POSIXlt
## 1273                    unique.warnings                    unique.warnings
## 1274                              units                              units
## 1275                     units.difftime                     units.difftime
## 1276                            units<-                            units<-
## 1277                   units<-.difftime                   units<-.difftime
## 1278                          unix.time                          unix.time
## 1279                             unlink                             unlink
## 1280                             unlist                             unlist
## 1281                    unloadNamespace                    unloadNamespace
## 1282                      unlockBinding                      unlockBinding
## 1283                             unname                             unname
## 1284                        unserialize                        unserialize
## 1285                            unsplit                            unsplit
## 1286                            untrace                            untrace
## 1287                         untracemem                         untracemem
## 1288                                unz                                unz
## 1289                          upper.tri                          upper.tri
## 1290                                url                                url
## 1291                          UseMethod                          UseMethod
## 1292                          utf8ToInt                          utf8ToInt
## 1293                           validEnc                           validEnc
## 1294                          validUTF8                          validUTF8
## 1295                             vapply                             vapply
## 1296                             vector                             vector
## 1297                          Vectorize                          Vectorize
## 1298                            warning                            warning
## 1299                   warningCondition                   warningCondition
## 1300                           warnings                           warnings
## 1301                           weekdays                           weekdays
## 1302                      weekdays.Date                      weekdays.Date
## 1303                    weekdays.POSIXt                    weekdays.POSIXt
## 1304                              which                              which
## 1305                          which.max                          which.max
## 1306                          which.min                          which.min
## 1307                              while                              while
## 1308                               with                               with
## 1309                       with.default                       with.default
## 1310                      withAutoprint                      withAutoprint
## 1311                withCallingHandlers                withCallingHandlers
## 1312                             within                             within
## 1313                  within.data.frame                  within.data.frame
## 1314                        within.list                        within.list
## 1315                       withRestarts                       withRestarts
## 1316                        withVisible                        withVisible
## 1317                              write                              write
## 1318                          write.dcf                          write.dcf
## 1319                           writeBin                           writeBin
## 1320                          writeChar                          writeChar
## 1321                         writeLines                         writeLines
## 1322                                xor                                xor
## 1323                 xpdrows.data.frame                 xpdrows.data.frame
## 1324                              xtfrm                              xtfrm
## 1325                         xtfrm.AsIs                         xtfrm.AsIs
## 1326                   xtfrm.data.frame                   xtfrm.data.frame
## 1327                         xtfrm.Date                         xtfrm.Date
## 1328                      xtfrm.default                      xtfrm.default
## 1329                     xtfrm.difftime                     xtfrm.difftime
## 1330                       xtfrm.factor                       xtfrm.factor
## 1331              xtfrm.numeric_version              xtfrm.numeric_version
## 1332                      xtfrm.POSIXct                      xtfrm.POSIXct
## 1333                      xtfrm.POSIXlt                      xtfrm.POSIXlt
## 1334                             xzfile                             xzfile
## 1335                           zapsmall                           zapsmall
```


```r
# Some base R functions with point.separated names
install.packages
```

```
## function (pkgs, lib, repos = getOption("repos"), contriburl = contrib.url(repos, 
##     type), method, available = NULL, destdir = NULL, dependencies = NA, 
##     type = getOption("pkgType"), configure.args = getOption("configure.args"), 
##     configure.vars = getOption("configure.vars"), clean = FALSE, 
##     Ncpus = getOption("Ncpus", 1L), verbose = getOption("verbose"), 
##     libs_only = FALSE, INSTALL_opts, quiet = FALSE, keep_outputs = FALSE, 
##     ...) 
## {
##     if (!is.character(type)) 
##         stop("invalid 'type'; must be a character string")
##     type2 <- .Platform$pkgType
##     if (type == "binary") {
##         if (type2 == "source") 
##             stop("type 'binary' is not supported on this platform")
##         else type <- type2
##         if (type == "both" && (!missing(contriburl) || !is.null(available))) 
##             stop("specifying 'contriburl' or 'available' requires a single type, not type = \"both\"")
##     }
##     if (is.logical(clean) && clean) 
##         clean <- "--clean"
##     if (is.logical(dependencies) && is.na(dependencies)) 
##         dependencies <- if (!missing(lib) && length(lib) > 1L) 
##             FALSE
##         else c("Depends", "Imports", "LinkingTo")
##     get_package_name <- function(pkg) {
##         gsub("_[.](zip|tar[.]gz|tar[.]bzip2|tar[.]xz)", "", gsub(.standard_regexps()$valid_package_version, 
##             "", basename(pkg)))
##     }
##     getConfigureArgs <- function(pkg) {
##         if (.Platform$OS.type == "windows") 
##             return(character())
##         if (length(pkgs) == 1L && length(configure.args) && length(names(configure.args)) == 
##             0L) 
##             return(paste0("--configure-args=", shQuote(paste(configure.args, 
##                 collapse = " "))))
##         pkg <- get_package_name(pkg)
##         if (length(configure.args) && length(names(configure.args)) && 
##             pkg %in% names(configure.args)) 
##             config <- paste0("--configure-args=", shQuote(paste(configure.args[[pkg]], 
##                 collapse = " ")))
##         else config <- character()
##         config
##     }
##     getConfigureVars <- function(pkg) {
##         if (.Platform$OS.type == "windows") 
##             return(character())
##         if (length(pkgs) == 1L && length(configure.vars) && length(names(configure.vars)) == 
##             0L) 
##             return(paste0("--configure-vars=", shQuote(paste(configure.vars, 
##                 collapse = " "))))
##         pkg <- get_package_name(pkg)
##         if (length(configure.vars) && length(names(configure.vars)) && 
##             pkg %in% names(configure.vars)) 
##             config <- paste0("--configure-vars=", shQuote(paste(configure.vars[[pkg]], 
##                 collapse = " ")))
##         else config <- character()
##         config
##     }
##     get_install_opts <- function(pkg) {
##         if (!length(INSTALL_opts)) 
##             character()
##         else paste(INSTALL_opts[[get_package_name(pkg)]], collapse = " ")
##     }
##     if (missing(pkgs)) {
##         if (!interactive()) 
##             stop("no packages were specified")
##         if (.Platform$OS.type == "windows" || .Platform$GUI == 
##             "AQUA" || (capabilities("tcltk") && capabilities("X11") && 
##             suppressWarnings(tcltk::.TkUp))) {
##         }
##         else stop("no packages were specified")
##         if (is.null(available)) {
##             av <- available.packages(contriburl = contriburl, 
##                 method = method, ...)
##             if (missing(repos)) 
##                 repos <- getOption("repos")
##             if (type != "both") 
##                 available <- av
##         }
##         else av <- available
##         if (NROW(av)) {
##             pkgs <- select.list(sort(unique(rownames(av))), multiple = TRUE, 
##                 title = "Packages", graphics = TRUE)
##         }
##     }
##     if (.Platform$OS.type == "windows" && length(pkgs)) {
##         pkgnames <- get_package_name(pkgs)
##         inuse <- search()
##         inuse <- sub("^package:", "", inuse[grep("^package:", 
##             inuse)])
##         inuse <- pkgnames %in% inuse
##         if (any(inuse)) {
##             warning(sprintf(ngettext(sum(inuse), "package %s is in use and will not be installed", 
##                 "packages %s are in use and will not be installed"), 
##                 paste(sQuote(pkgnames[inuse]), collapse = ", ")), 
##                 call. = FALSE, domain = NA, immediate. = TRUE)
##             pkgs <- pkgs[!inuse]
##         }
##     }
##     if (!length(pkgs)) 
##         return(invisible())
##     if (missing(lib) || is.null(lib)) {
##         lib <- .libPaths()[1L]
##         if (!quiet && length(.libPaths()) > 1L) 
##             message(sprintf(ngettext(length(pkgs), "Installing package into %s\n(as %s is unspecified)", 
##                 "Installing packages into %s\n(as %s is unspecified)"), 
##                 sQuote(lib), sQuote("lib")), domain = NA)
##     }
##     ok <- dir.exists(lib) & (file.access(lib, 2) == 0L)
##     if (length(lib) > 1 && any(!ok)) 
##         stop(sprintf(ngettext(sum(!ok), "'lib' element %s is not a writable directory", 
##             "'lib' elements %s are not writable directories"), 
##             paste(sQuote(lib[!ok]), collapse = ", ")), domain = NA)
##     if (length(lib) == 1L && .Platform$OS.type == "windows") {
##         ok <- dir.exists(lib)
##         if (ok) {
##             fn <- file.path(lib, paste0("_test_dir_", Sys.getpid()))
##             unlink(fn, recursive = TRUE)
##             res <- try(dir.create(fn, showWarnings = FALSE))
##             if (inherits(res, "try-error") || !res) 
##                 ok <- FALSE
##             else unlink(fn, recursive = TRUE)
##         }
##     }
##     if (length(lib) == 1L && !ok) {
##         warning(gettextf("'lib = \"%s\"' is not writable", lib), 
##             domain = NA, immediate. = TRUE)
##         userdir <- unlist(strsplit(Sys.getenv("R_LIBS_USER"), 
##             .Platform$path.sep))[1L]
##         if (interactive()) {
##             ans <- askYesNo(gettext("Would you like to use a personal library instead?"), 
##                 default = FALSE)
##             if (!isTRUE(ans)) 
##                 stop("unable to install packages")
##             lib <- userdir
##             if (!file.exists(userdir)) {
##                 ans <- askYesNo(gettextf("Would you like to create a personal library\n%s\nto install packages into?", 
##                   sQuote(userdir)), default = FALSE)
##                 if (!isTRUE(ans)) 
##                   stop("unable to install packages")
##                 if (!dir.create(userdir, recursive = TRUE)) 
##                   stop(gettextf("unable to create %s", sQuote(userdir)), 
##                     domain = NA)
##                 .libPaths(c(userdir, .libPaths()))
##             }
##         }
##         else stop("unable to install packages")
##     }
##     lib <- normalizePath(lib)
##     if (length(pkgs) == 1L && missing(repos) && missing(contriburl)) {
##         if ((type == "source" && any(grepl("[.]tar[.](gz|bz2|xz)$", 
##             pkgs))) || (type %in% "win.binary" && endsWith(pkgs, 
##             ".zip")) || (startsWith(type, "mac.binary") && endsWith(pkgs, 
##             ".tgz"))) {
##             repos <- NULL
##             message("inferring 'repos = NULL' from 'pkgs'")
##         }
##         if (type == "both") {
##             if (type2 %in% "win.binary" && endsWith(pkgs, ".zip")) {
##                 repos <- NULL
##                 type <- type2
##                 message("inferring 'repos = NULL' from 'pkgs'")
##             }
##             else if (startsWith(type2, "mac.binary") && endsWith(pkgs, 
##                 ".tgz")) {
##                 repos <- NULL
##                 type <- type2
##                 message("inferring 'repos = NULL' from 'pkgs'")
##             }
##             else if (grepl("[.]tar[.](gz|bz2|xz)$", pkgs)) {
##                 repos <- NULL
##                 type <- "source"
##                 message("inferring 'repos = NULL' from 'pkgs'")
##             }
##         }
##     }
##     if (length(pkgs) == 1L && is.null(repos) && type == "both") {
##         if ((type2 %in% "win.binary" && endsWith(pkgs, ".zip")) || 
##             (startsWith(type2, "mac.binary") && endsWith(pkgs, 
##                 ".tgz"))) {
##             type <- type2
##         }
##         else if (grepl("[.]tar[.](gz|bz2|xz)$", pkgs)) {
##             type <- "source"
##         }
##     }
##     if (is.null(repos) && missing(contriburl)) {
##         tmpd <- destdir
##         nonlocalrepos <- any(web <- grepl("^(http|https|ftp)://", 
##             pkgs))
##         if (is.null(destdir) && nonlocalrepos) {
##             tmpd <- file.path(tempdir(), "downloaded_packages")
##             if (!file.exists(tmpd) && !dir.create(tmpd)) 
##                 stop(gettextf("unable to create temporary directory %s", 
##                   sQuote(tmpd)), domain = NA)
##         }
##         if (nonlocalrepos) {
##             df <- function(p, destfile, method, ...) download.file(p, 
##                 destfile, method, mode = "wb", ...)
##             urls <- pkgs[web]
##             for (p in unique(urls)) {
##                 this <- pkgs == p
##                 destfile <- file.path(tmpd, basename(p))
##                 res <- try(df(p, destfile, method, ...))
##                 if (!inherits(res, "try-error") && res == 0L) 
##                   pkgs[this] <- destfile
##                 else {
##                   pkgs[this] <- NA
##                 }
##             }
##         }
##     }
##     if (type == "both") {
##         if (type2 == "source") 
##             stop("type == \"both\" can only be used on Windows or a CRAN build for macOS")
##         if (!missing(contriburl) || !is.null(available)) 
##             type <- type2
##     }
##     getDeps <- TRUE
##     if (type == "both") {
##         if (is.null(repos)) 
##             stop("type == \"both\" cannot be used with 'repos = NULL'")
##         type <- "source"
##         contriburl <- contrib.url(repos, "source")
##         if (missing(repos)) 
##             repos <- getOption("repos")
##         available <- available.packages(contriburl = contriburl, 
##             method = method, fields = "NeedsCompilation", ...)
##         pkgs <- getDependencies(pkgs, dependencies, available, 
##             lib, ...)
##         getDeps <- FALSE
##         av2 <- available.packages(contriburl = contrib.url(repos, 
##             type2), method = method, ...)
##         bins <- row.names(av2)
##         bins <- pkgs[pkgs %in% bins]
##         srcOnly <- pkgs[!pkgs %in% bins]
##         binvers <- av2[bins, "Version"]
##         hasArchs <- !is.na(av2[bins, "Archs"])
##         needsCmp <- !(available[bins, "NeedsCompilation"] %in% 
##             "no")
##         hasSrc <- hasArchs | needsCmp
##         srcvers <- available[bins, "Version"]
##         later <- as.numeric_version(binvers) < srcvers
##         action <- getOption("install.packages.compile.from.source", 
##             "interactive")
##         if (!nzchar(Sys.which(Sys.getenv("MAKE", "make")))) 
##             action <- "never"
##         if (any(later)) {
##             msg <- ngettext(sum(later), "There is a binary version available but the source version is later", 
##                 "There are binary versions available but the source versions are later")
##             cat("\n", paste(strwrap(msg, indent = 2, exdent = 2), 
##                 collapse = "\n"), ":\n", sep = "")
##             out <- data.frame(binary = binvers, source = srcvers, 
##                 needs_compilation = hasSrc, row.names = bins, 
##                 check.names = FALSE)[later, ]
##             print(out)
##             cat("\n")
##             if (any(later & hasSrc)) {
##                 if (action == "interactive" && interactive()) {
##                   msg <- ngettext(sum(later & hasSrc), "Do you want to install from sources the package which needs compilation?", 
##                     "Do you want to install from sources the packages which need compilation?")
##                   res <- askYesNo(msg)
##                   if (is.na(res)) 
##                     stop("Cancelled by user")
##                   if (!isTRUE(res)) 
##                     later <- later & !hasSrc
##                 }
##                 else if (action == "never") {
##                   cat("  Binaries will be installed\n")
##                   later <- later & !hasSrc
##                 }
##             }
##         }
##         bins <- bins[!later]
##         if (length(srcOnly)) {
##             s2 <- srcOnly[!(available[srcOnly, "NeedsCompilation"] %in% 
##                 "no")]
##             if (length(s2)) {
##                 msg <- ngettext(length(s2), "Package which is only available in source form, and may need compilation of C/C++/Fortran", 
##                   "Packages which are only available in source form, and may need compilation of C/C++/Fortran")
##                 msg <- c(paste0(msg, ": "), sQuote(s2))
##                 msg <- strwrap(paste(msg, collapse = " "), exdent = 2)
##                 message(paste(msg, collapse = "\n"), domain = NA)
##                 if (action == "interactive" && interactive()) {
##                   res <- askYesNo("Do you want to attempt to install these from sources?")
##                   if (is.na(res)) 
##                     stop("Cancelled by user")
##                   if (!isTRUE(res)) 
##                     pkgs <- setdiff(pkgs, s2)
##                 }
##                 else if (action == "never") {
##                   cat("  These will not be installed\n")
##                   pkgs <- setdiff(pkgs, s2)
##                 }
##             }
##         }
##         if (length(bins)) {
##             if (type2 == "win.binary") 
##                 .install.winbinary(pkgs = bins, lib = lib, contriburl = contrib.url(repos, 
##                   type2), method = method, available = av2, destdir = destdir, 
##                   dependencies = NULL, libs_only = libs_only, 
##                   quiet = quiet, ...)
##             else .install.macbinary(pkgs = bins, lib = lib, contriburl = contrib.url(repos, 
##                 type2), method = method, available = av2, destdir = destdir, 
##                 dependencies = NULL, quiet = quiet, ...)
##         }
##         pkgs <- setdiff(pkgs, bins)
##         if (!length(pkgs)) 
##             return(invisible())
##         message(sprintf(ngettext(length(pkgs), "installing the source package %s", 
##             "installing the source packages %s"), paste(sQuote(pkgs), 
##             collapse = ", ")), "\n", domain = NA)
##         flush.console()
##     }
##     else if (getOption("install.packages.check.source", "yes") %in% 
##         "yes" && (type %in% "win.binary" || startsWith(type, 
##         "mac.binary"))) {
##         if (missing(contriburl) && is.null(available) && !is.null(repos)) {
##             contriburl2 <- contrib.url(repos, "source")
##             if (missing(repos)) 
##                 repos <- getOption("repos")
##             av1 <- tryCatch(suppressWarnings(available.packages(contriburl = contriburl2, 
##                 method = method, ...)), error = function(e) e)
##             if (inherits(av1, "error")) {
##                 message("source repository is unavailable to check versions")
##                 available <- available.packages(contriburl = contrib.url(repos, 
##                   type), method = method, ...)
##             }
##             else {
##                 srcpkgs <- pkgs[pkgs %in% row.names(av1)]
##                 available <- available.packages(contriburl = contrib.url(repos, 
##                   type), method = method, ...)
##                 bins <- pkgs[pkgs %in% row.names(available)]
##                 na <- srcpkgs[!srcpkgs %in% bins]
##                 if (length(na)) {
##                   msg <- sprintf(ngettext(length(na), "package %s is available as a source package but not as a binary", 
##                     "packages %s are available as source packages but not as binaries"), 
##                     paste(sQuote(na), collapse = ", "))
##                   cat("\n   ", msg, "\n\n", sep = "")
##                 }
##                 binvers <- available[bins, "Version"]
##                 srcvers <- binvers
##                 OK <- bins %in% srcpkgs
##                 srcvers[OK] <- av1[bins[OK], "Version"]
##                 later <- as.numeric_version(binvers) < srcvers
##                 if (any(later)) {
##                   msg <- ngettext(sum(later), "There is a binary version available (and will be installed) but the source version is later", 
##                     "There are binary versions available (and will be installed) but the source versions are later")
##                   cat("\n", paste(strwrap(msg, indent = 2, exdent = 2), 
##                     collapse = "\n"), ":\n", sep = "")
##                   print(data.frame(binary = binvers, source = srcvers, 
##                     row.names = bins, check.names = FALSE)[later, 
##                     ])
##                   cat("\n")
##                 }
##             }
##         }
##     }
##     if (.Platform$OS.type == "windows") {
##         if (startsWith(type, "mac.binary")) 
##             stop("cannot install macOS binary packages on Windows")
##         if (type %in% "win.binary") {
##             .install.winbinary(pkgs = pkgs, lib = lib, contriburl = contriburl, 
##                 method = method, available = available, destdir = destdir, 
##                 dependencies = dependencies, libs_only = libs_only, 
##                 quiet = quiet, ...)
##             return(invisible())
##         }
##         have_spaces <- grep(" ", pkgs)
##         if (length(have_spaces)) {
##             p <- pkgs[have_spaces]
##             dirs <- shortPathName(dirname(p))
##             pkgs[have_spaces] <- file.path(dirs, basename(p))
##         }
##         pkgs <- gsub("\\", "/", pkgs, fixed = TRUE)
##     }
##     else {
##         if (startsWith(type, "mac.binary")) {
##             if (!grepl("darwin", R.version$platform)) 
##                 stop("cannot install macOS binary packages on this platform")
##             .install.macbinary(pkgs = pkgs, lib = lib, contriburl = contriburl, 
##                 method = method, available = available, destdir = destdir, 
##                 dependencies = dependencies, quiet = quiet, ...)
##             return(invisible())
##         }
##         if (type %in% "win.binary") 
##             stop("cannot install Windows binary packages on this platform")
##         if (!file.exists(file.path(R.home("bin"), "INSTALL"))) 
##             stop("This version of R is not set up to install source packages\nIf it was installed from an RPM, you may need the R-devel RPM")
##     }
##     cmd0 <- file.path(R.home("bin"), "R")
##     args0 <- c("CMD", "INSTALL")
##     output <- if (quiet) 
##         FALSE
##     else ""
##     env <- character()
##     tlim <- Sys.getenv("_R_INSTALL_PACKAGES_ELAPSED_TIMEOUT_")
##     tlim <- if (is.na(tlim)) 
##         0
##     else tools:::get_timeout(tlim)
##     outdir <- getwd()
##     if (is.logical(keep_outputs)) {
##         if (is.na(keep_outputs)) 
##             keep_outputs <- FALSE
##     }
##     else if (is.character(keep_outputs) && (length(keep_outputs) == 
##         1L)) {
##         if (!dir.exists(keep_outputs) && !dir.create(keep_outputs, 
##             recursive = TRUE)) 
##             stop(gettextf("unable to create %s", sQuote(keep_outputs)), 
##                 domain = NA)
##         outdir <- normalizePath(keep_outputs)
##         keep_outputs <- TRUE
##     }
##     else stop(gettextf("invalid %s argument", sQuote("keep_outputs")), 
##         domain = NA)
##     if (length(libpath <- .R_LIBS())) {
##         if (.Platform$OS.type == "windows") {
##             oldrlibs <- Sys.getenv("R_LIBS")
##             Sys.setenv(R_LIBS = libpath)
##             on.exit(Sys.setenv(R_LIBS = oldrlibs))
##         }
##         else env <- paste0("R_LIBS=", shQuote(libpath))
##     }
##     if (is.character(clean)) 
##         args0 <- c(args0, clean)
##     if (libs_only) 
##         args0 <- c(args0, "--libs-only")
##     if (!missing(INSTALL_opts)) {
##         if (!is.list(INSTALL_opts)) {
##             args0 <- c(args0, paste(INSTALL_opts, collapse = " "))
##             INSTALL_opts <- list()
##         }
##     }
##     else {
##         INSTALL_opts <- list()
##     }
##     if (verbose) 
##         message(gettextf("system (cmd0): %s", paste(c(cmd0, args0), 
##             collapse = " ")), domain = NA)
##     if (is.null(repos) && missing(contriburl)) {
##         update <- cbind(path.expand(pkgs), lib)
##         for (i in seq_len(nrow(update))) {
##             if (is.na(update[i, 1L])) 
##                 next
##             args <- c(args0, get_install_opts(update[i, 1L]), 
##                 "-l", shQuote(update[i, 2L]), getConfigureArgs(update[i, 
##                   1L]), getConfigureVars(update[i, 1L]), shQuote(update[i, 
##                   1L]))
##             status <- system2(cmd0, args, env = env, stdout = output, 
##                 stderr = output, timeout = tlim)
##             if (status > 0L) 
##                 warning(gettextf("installation of package %s had non-zero exit status", 
##                   sQuote(update[i, 1L])), domain = NA)
##             else if (verbose) {
##                 cmd <- paste(c(cmd0, args), collapse = " ")
##                 message(sprintf("%d): succeeded '%s'", i, cmd), 
##                   domain = NA)
##             }
##         }
##         return(invisible())
##     }
##     tmpd <- destdir
##     nonlocalrepos <- !all(startsWith(contriburl, "file:"))
##     if (is.null(destdir) && nonlocalrepos) {
##         tmpd <- file.path(tempdir(), "downloaded_packages")
##         if (!file.exists(tmpd) && !dir.create(tmpd)) 
##             stop(gettextf("unable to create temporary directory %s", 
##                 sQuote(tmpd)), domain = NA)
##     }
##     av2 <- NULL
##     if (is.null(available)) {
##         filters <- getOption("available_packages_filters")
##         if (!is.null(filters)) {
##             available <- available.packages(contriburl = contriburl, 
##                 method = method, ...)
##         }
##         else {
##             f <- setdiff(available_packages_filters_default, 
##                 c("R_version", "duplicates"))
##             av2 <- available.packages(contriburl = contriburl, 
##                 filters = f, method = method, ...)
##             f <- available_packages_filters_db[["R_version"]]
##             f2 <- available_packages_filters_db[["duplicates"]]
##             available <- f2(f(av2))
##         }
##     }
##     if (getDeps) 
##         pkgs <- getDependencies(pkgs, dependencies, available, 
##             lib, ..., av2 = av2)
##     foundpkgs <- download.packages(pkgs, destdir = tmpd, available = available, 
##         contriburl = contriburl, method = method, type = "source", 
##         quiet = quiet, ...)
##     if (length(foundpkgs)) {
##         if (verbose) 
##             message(gettextf("foundpkgs: %s", paste(foundpkgs, 
##                 collapse = ", ")), domain = NA)
##         update <- unique(cbind(pkgs, lib))
##         colnames(update) <- c("Package", "LibPath")
##         found <- pkgs %in% foundpkgs[, 1L]
##         files <- foundpkgs[match(pkgs[found], foundpkgs[, 1L]), 
##             2L]
##         if (verbose) 
##             message(gettextf("files: %s", paste(files, collapse = ", \n\t")), 
##                 domain = NA)
##         update <- cbind(update[found, , drop = FALSE], file = files)
##         if (nrow(update) > 1L) {
##             upkgs <- unique(pkgs <- update[, 1L])
##             DL <- .make_dependency_list(upkgs, available)
##             p0 <- .find_install_order(upkgs, DL)
##             update <- update[sort.list(match(pkgs, p0)), ]
##         }
##         if (Ncpus > 1L && nrow(update) > 1L) {
##             tlim_cmd <- character()
##             if (tlim > 0) {
##                 if (nzchar(timeout <- Sys.which("timeout"))) {
##                   tlim_cmd <- c(shQuote(timeout), "-s INT", tlim)
##                 }
##                 else warning("timeouts for parallel installs require the 'timeout' command")
##             }
##             args0 <- c(args0, "--pkglock")
##             tmpd2 <- file.path(tempdir(), "make_packages")
##             if (!file.exists(tmpd2) && !dir.create(tmpd2)) 
##                 stop(gettextf("unable to create temporary directory %s", 
##                   sQuote(tmpd2)), domain = NA)
##             mfile <- file.path(tmpd2, "Makefile")
##             conn <- file(mfile, "wt")
##             deps <- paste(paste0(update[, 1L], ".ts"), collapse = " ")
##             deps <- strwrap(deps, width = 75, exdent = 2)
##             deps <- paste(deps, collapse = " \\\n")
##             cat("all: ", deps, "\n", sep = "", file = conn)
##             aDL <- .make_dependency_list(upkgs, available, recursive = TRUE)
##             for (i in seq_len(nrow(update))) {
##                 pkg <- update[i, 1L]
##                 fil <- update[i, 3L]
##                 args <- c(args0, get_install_opts(fil), "-l", 
##                   shQuote(update[i, 2L]), getConfigureArgs(fil), 
##                   getConfigureVars(fil), shQuote(fil), ">", paste0(pkg, 
##                     ".out"), "2>&1")
##                 cmd <- paste(c("MAKEFLAGS=", tlim_cmd, shQuote(cmd0), 
##                   args), collapse = " ")
##                 deps <- aDL[[pkg]]
##                 deps <- deps[deps %in% upkgs]
##                 deps <- if (length(deps)) 
##                   paste(paste0(deps, ".ts"), collapse = " ")
##                 else ""
##                 cat(paste0(pkg, ".ts: ", deps), paste("\t@echo begin installing package", 
##                   sQuote(pkg)), paste0("\t@", cmd, " && touch ", 
##                   pkg, ".ts"), paste0("\t@cat ", pkg, ".out"), 
##                   "", sep = "\n", file = conn)
##             }
##             close(conn)
##             cwd <- setwd(tmpd2)
##             on.exit(setwd(cwd))
##             status <- system2(Sys.getenv("MAKE", "make"), c("-k -j", 
##                 Ncpus), stdout = output, stderr = output, env = env)
##             if (status > 0L) {
##                 pkgs <- update[, 1L]
##                 tss <- sub("[.]ts$", "", dir(".", pattern = "[.]ts$"))
##                 failed <- pkgs[!pkgs %in% tss]
##                 for (pkg in failed) system(paste0("cat ", pkg, 
##                   ".out"))
##                 warning(gettextf("installation of one or more packages failed,\n  probably %s", 
##                   paste(sQuote(failed), collapse = ", ")), domain = NA)
##             }
##             if (keep_outputs) 
##                 file.copy(paste0(update[, 1L], ".out"), outdir)
##             file.copy(Sys.glob(paste0(update[, 1L], "*.zip")), 
##                 cwd)
##             file.copy(Sys.glob(paste0(update[, 1L], "*.tgz")), 
##                 cwd)
##             file.copy(Sys.glob(paste0(update[, 1L], "*.tar.gz")), 
##                 cwd)
##             setwd(cwd)
##             on.exit()
##             unlink(tmpd2, recursive = TRUE)
##         }
##         else {
##             tmpd2 <- tempfile()
##             if (!dir.create(tmpd2)) 
##                 stop(gettextf("unable to create temporary directory %s", 
##                   sQuote(tmpd2)), domain = NA)
##             outfiles <- file.path(tmpd2, paste0(update[, 1L], 
##                 ".out"))
##             for (i in seq_len(nrow(update))) {
##                 outfile <- if (keep_outputs) 
##                   outfiles[i]
##                 else output
##                 fil <- update[i, 3L]
##                 args <- c(args0, get_install_opts(fil), "-l", 
##                   shQuote(update[i, 2L]), getConfigureArgs(fil), 
##                   getConfigureVars(fil), shQuote(fil))
##                 status <- system2(cmd0, args, env = env, stdout = outfile, 
##                   stderr = outfile, timeout = tlim)
##                 if (!quiet && keep_outputs) 
##                   writeLines(readLines(outfile))
##                 if (status > 0L) 
##                   warning(gettextf("installation of package %s had non-zero exit status", 
##                     sQuote(update[i, 1L])), domain = NA)
##                 else if (verbose) {
##                   cmd <- paste(c(cmd0, args), collapse = " ")
##                   message(sprintf("%d): succeeded '%s'", i, cmd), 
##                     domain = NA)
##                 }
##             }
##             if (keep_outputs) 
##                 file.copy(outfiles, outdir)
##             unlink(tmpd2, recursive = TRUE)
##         }
##         if (!quiet && nonlocalrepos && !is.null(tmpd) && is.null(destdir)) 
##             cat("\n", gettextf("The downloaded source packages are in\n\t%s", 
##                 sQuote(normalizePath(tmpd, mustWork = FALSE))), 
##                 "\n", sep = "", file = stderr())
##         libs_used <- unique(update[, 2L])
##         if (.Platform$OS.type == "unix" && .Library %in% libs_used) {
##             message("Updating HTML index of packages in '.Library'")
##             make.packages.html(.Library)
##         }
##     }
##     else if (!is.null(tmpd) && is.null(destdir)) 
##         unlink(tmpd, TRUE)
##     invisible()
## }
## <bytecode: 0x000001af0bfe0bb0>
## <environment: namespace:utils>
```

```r
read.csv
```

```
## function (file, header = TRUE, sep = ",", quote = "\"", dec = ".", 
##     fill = TRUE, comment.char = "", ...) 
## read.table(file = file, header = header, sep = sep, quote = quote, 
##     dec = dec, fill = fill, comment.char = comment.char, ...)
## <bytecode: 0x000001af0be11828>
## <environment: namespace:utils>
```

```r
list.files
```

```
## function (path = ".", pattern = NULL, all.files = FALSE, full.names = FALSE, 
##     recursive = FALSE, ignore.case = FALSE, include.dirs = FALSE, 
##     no.. = FALSE) 
## .Internal(list.files(path, pattern, all.files, full.names, recursive, 
##     ignore.case, include.dirs, no..))
## <bytecode: 0x000001af0dfe9e30>
## <environment: namespace:base>
```

```r
download.file
```

```
## function (url, destfile, method, quiet = FALSE, mode = "w", cacheOK = TRUE, 
##     extra = getOption("download.file.extra"), headers = NULL, 
##     ...) 
## {
##     destfile
##     method <- if (missing(method)) 
##         getOption("download.file.method", default = "auto")
##     else match.arg(method, c("auto", "internal", "wininet", "libcurl", 
##         "wget", "curl", "lynx"))
##     if (missing(mode) && length(grep("\\.(gz|bz2|xz|tgz|zip|jar|rd[as]|RData)$", 
##         URLdecode(url)))) 
##         mode <- "wb"
##     if (method == "auto") {
##         if (length(url) != 1L || typeof(url) != "character") 
##             stop("'url' must be a length-one character vector")
##         method <- if (startsWith(url, "file:")) 
##             "wininet"
##         else "libcurl"
##     }
##     nh <- names(headers)
##     if (length(nh) != length(headers) || any(nh == "") || anyNA(headers) || 
##         anyNA(nh)) 
##         stop("'headers' must have names and must not be NA")
##     switch(method, internal = , wininet = {
##         headers <- if (length(headers)) paste0(nh, ": ", headers, 
##             "\r\n", collapse = "")
##         status <- .External(C_download, url, destfile, quiet, 
##             mode, cacheOK, headers, method == "wininet")
##     }, libcurl = {
##         headers <- if (length(headers)) paste0(nh, ": ", headers)
##         status <- .Internal(curlDownload(url, destfile, quiet, 
##             mode, cacheOK, headers))
##     }, wget = {
##         if (length(url) != 1L || typeof(url) != "character") stop("'url' must be a length-one character vector")
##         if (length(destfile) != 1L || typeof(destfile) != "character") stop("'destfile' must be a length-one character vector")
##         if (quiet) extra <- c(extra, "--quiet")
##         if (!cacheOK) extra <- c(extra, "--cache=off")
##         status <- system(paste("wget", paste(extra, collapse = " "), 
##             shQuote(url), "-O", shQuote(path.expand(destfile))))
##         if (status) stop("'wget' call had nonzero exit status")
##     }, curl = {
##         if (length(url) != 1L || typeof(url) != "character") stop("'url' must be a length-one character vector")
##         if (length(destfile) != 1L || typeof(url) != "character") stop("'destfile' must be a length-one character vector")
##         if (quiet) extra <- c(extra, "-s -S")
##         if (!cacheOK) extra <- c(extra, paste("-H", shQuote("Pragma: no-cache")))
##         status <- system(paste("curl", paste(extra, collapse = " "), 
##             shQuote(url), " -o", shQuote(path.expand(destfile))))
##         if (status) stop("'curl' call had nonzero exit status")
##     }, lynx = stop("method 'lynx' is defunct", domain = NA))
##     if (status > 0L) 
##         warning("download had nonzero exit status")
##     invisible(status)
## }
## <bytecode: 0x000001af0b70aa08>
## <environment: namespace:utils>
```

```r
data.frame
```

```
## function (..., row.names = NULL, check.rows = FALSE, check.names = TRUE, 
##     fix.empty.names = TRUE, stringsAsFactors = FALSE) 
## {
##     data.row.names <- if (check.rows && is.null(row.names)) 
##         function(current, new, i) {
##             if (is.character(current)) 
##                 new <- as.character(new)
##             if (is.character(new)) 
##                 current <- as.character(current)
##             if (anyDuplicated(new)) 
##                 return(current)
##             if (is.null(current)) 
##                 return(new)
##             if (all(current == new) || all(current == "")) 
##                 return(new)
##             stop(gettextf("mismatch of row names in arguments of 'data.frame', item %d", 
##                 i), domain = NA)
##         }
##     else function(current, new, i) {
##         if (is.null(current)) {
##             if (anyDuplicated(new)) {
##                 warning(gettextf("some row.names duplicated: %s --> row.names NOT used", 
##                   paste(which(duplicated(new)), collapse = ",")), 
##                   domain = NA)
##                 current
##             }
##             else new
##         }
##         else current
##     }
##     object <- as.list(substitute(list(...)))[-1L]
##     mirn <- missing(row.names)
##     mrn <- is.null(row.names)
##     x <- list(...)
##     n <- length(x)
##     if (n < 1L) {
##         if (!mrn) {
##             if (is.object(row.names) || !is.integer(row.names)) 
##                 row.names <- as.character(row.names)
##             if (anyNA(row.names)) 
##                 stop("row names contain missing values")
##             if (anyDuplicated(row.names)) 
##                 stop(gettextf("duplicate row.names: %s", paste(unique(row.names[duplicated(row.names)]), 
##                   collapse = ", ")), domain = NA)
##         }
##         else row.names <- integer()
##         return(structure(list(), names = character(), row.names = row.names, 
##             class = "data.frame"))
##     }
##     vnames <- names(x)
##     if (length(vnames) != n) 
##         vnames <- character(n)
##     no.vn <- !nzchar(vnames)
##     vlist <- vnames <- as.list(vnames)
##     nrows <- ncols <- integer(n)
##     for (i in seq_len(n)) {
##         xi <- if (is.character(x[[i]]) || is.list(x[[i]])) 
##             as.data.frame(x[[i]], optional = TRUE, stringsAsFactors = stringsAsFactors)
##         else as.data.frame(x[[i]], optional = TRUE)
##         nrows[i] <- .row_names_info(xi)
##         ncols[i] <- length(xi)
##         namesi <- names(xi)
##         if (ncols[i] > 1L) {
##             if (length(namesi) == 0L) 
##                 namesi <- seq_len(ncols[i])
##             vnames[[i]] <- if (no.vn[i]) 
##                 namesi
##             else paste(vnames[[i]], namesi, sep = ".")
##         }
##         else if (length(namesi)) {
##             vnames[[i]] <- namesi
##         }
##         else if (fix.empty.names && no.vn[[i]]) {
##             tmpname <- deparse(object[[i]], nlines = 1L)[1L]
##             if (startsWith(tmpname, "I(") && endsWith(tmpname, 
##                 ")")) {
##                 ntmpn <- nchar(tmpname, "c")
##                 tmpname <- substr(tmpname, 3L, ntmpn - 1L)
##             }
##             vnames[[i]] <- tmpname
##         }
##         if (mirn && nrows[i] > 0L) {
##             rowsi <- attr(xi, "row.names")
##             if (any(nzchar(rowsi))) 
##                 row.names <- data.row.names(row.names, rowsi, 
##                   i)
##         }
##         nrows[i] <- abs(nrows[i])
##         vlist[[i]] <- xi
##     }
##     nr <- max(nrows)
##     for (i in seq_len(n)[nrows < nr]) {
##         xi <- vlist[[i]]
##         if (nrows[i] > 0L && (nr%%nrows[i] == 0L)) {
##             xi <- unclass(xi)
##             fixed <- TRUE
##             for (j in seq_along(xi)) {
##                 xi1 <- xi[[j]]
##                 if (is.vector(xi1) || is.factor(xi1)) 
##                   xi[[j]] <- rep(xi1, length.out = nr)
##                 else if (is.character(xi1) && inherits(xi1, "AsIs")) 
##                   xi[[j]] <- structure(rep(xi1, length.out = nr), 
##                     class = class(xi1))
##                 else if (inherits(xi1, "Date") || inherits(xi1, 
##                   "POSIXct")) 
##                   xi[[j]] <- rep(xi1, length.out = nr)
##                 else {
##                   fixed <- FALSE
##                   break
##                 }
##             }
##             if (fixed) {
##                 vlist[[i]] <- xi
##                 next
##             }
##         }
##         stop(gettextf("arguments imply differing number of rows: %s", 
##             paste(unique(nrows), collapse = ", ")), domain = NA)
##     }
##     value <- unlist(vlist, recursive = FALSE, use.names = FALSE)
##     vnames <- as.character(unlist(vnames[ncols > 0L]))
##     if (fix.empty.names && any(noname <- !nzchar(vnames))) 
##         vnames[noname] <- paste0("Var.", seq_along(vnames))[noname]
##     if (check.names) {
##         if (fix.empty.names) 
##             vnames <- make.names(vnames, unique = TRUE)
##         else {
##             nz <- nzchar(vnames)
##             vnames[nz] <- make.names(vnames[nz], unique = TRUE)
##         }
##     }
##     names(value) <- vnames
##     if (!mrn) {
##         if (length(row.names) == 1L && nr != 1L) {
##             if (is.character(row.names)) 
##                 row.names <- match(row.names, vnames, 0L)
##             if (length(row.names) != 1L || row.names < 1L || 
##                 row.names > length(vnames)) 
##                 stop("'row.names' should specify one of the variables")
##             i <- row.names
##             row.names <- value[[i]]
##             value <- value[-i]
##         }
##         else if (!is.null(row.names) && length(row.names) != 
##             nr) 
##             stop("row names supplied are of the wrong length")
##     }
##     else if (!is.null(row.names) && length(row.names) != nr) {
##         warning("row names were found from a short variable and have been discarded")
##         row.names <- NULL
##     }
##     class(value) <- "data.frame"
##     if (is.null(row.names)) 
##         attr(value, "row.names") <- .set_row_names(nr)
##     else {
##         if (is.object(row.names) || !is.integer(row.names)) 
##             row.names <- as.character(row.names)
##         if (anyNA(row.names)) 
##             stop("row names contain missing values")
##         if (anyDuplicated(row.names)) 
##             stop(gettextf("duplicate row.names: %s", paste(unique(row.names[duplicated(row.names)]), 
##                 collapse = ", ")), domain = NA)
##         row.names(value) <- row.names
##     }
##     value
## }
## <bytecode: 0x000001af09a98370>
## <environment: namespace:base>
```

```r
as.character
```

```
## function (x, ...)  .Primitive("as.character")
```

```r
Sys.Date
```

```
## function () 
## as.Date(as.POSIXlt(Sys.time()))
## <bytecode: 0x000001af0e28a0b8>
## <environment: namespace:base>
```

```r
all.equal
```

```
## function (target, current, ...) 
## UseMethod("all.equal")
## <bytecode: 0x000001af0f0921c8>
## <environment: namespace:base>
```

```r
do.call
```

```
## function (what, args, quote = FALSE, envir = parent.frame()) 
## {
##     if (!is.list(args)) 
##         stop("second argument must be a list")
##     if (quote) 
##         args <- lapply(args, enquote)
##     .Internal(do.call(what, args, envir))
## }
## <bytecode: 0x000001af0b6c12d0>
## <environment: namespace:base>
```

```r
on.exit
```

```
## function (expr = NULL, add = FALSE, after = TRUE)  .Primitive("on.exit")
```



3.  What does the `as.data.frame.data.frame()` method do? Why is
    it confusing? How could you avoid this confusion in your own
    code?
    
> as.data.frame is a generic function with many methods, and users and packages can supply further methods. For classes that act as vectors, often a copy of as.data.frame.vector will work as the method.

> the amount of .’s makes it difficult to separate the generic- and the class-part of the name. 

> We could avoid this confusion by applying a different naming convention (e.g. “snake_case”) for our class and function names. Snake case (stylized as snake_case) refers to the style of writing in which each space is replaced with an underscore (_) character, and the first letter of each word is written in lowercase. 

4.  Describe the difference in behaviour in these two calls.

    
    ```r
    set.seed(1014)
    some_days <- as.Date("2017-01-31") + sample(10, 5)
    
    mean(some_days)
    ```
    
    ```
    ## [1] "2017-02-06"
    ```
    
    ```r
    mean(unclass(some_days))
    ```
    
    ```
    ## [1] 17203.4
    ```
    

```r
ftype(mean)
```

```
## [1] "S3"      "generic"
```
> mean() is a generic function, which will select the appropriate method based on the class of the input.


```r
class(some_days)
```

```
## [1] "Date"
```

> some_days has the class Date and mean.Date(some_days) will be used to calculate the mean date of some_days.


```r
class(unclass(some_days))
```

```
## [1] "numeric"
```

> After unclass() has removed the class attribute from some_date, some_days become "numeric". `mean(unclass(some_days))` then calculates the mean of the underlying double number.

5.  What class of object does the following code return? What base type is it 
    built on? What attributes does it use?

    
    ```r
    x <- ecdf(rpois(100, 10))
    x
    ```
    
    ```
    ## Empirical CDF 
    ## Call: ecdf(rpois(100, 10))
    ##  x[1:18] =      2,      3,      4,  ...,     18,     19
    ```


```r
class(x)
```

```
## [1] "ecdf"     "stepfun"  "function"
```

> It returns an object of the class ecdf (empirical cumulative distribution function) with the superclasses stepfun and function.


```r
typeof(x)
```

```
## [1] "closure"
```

> The ecdf object is built on the base type closure (a function). 


```r
attributes(x)
```

```
## $class
## [1] "ecdf"     "stepfun"  "function"
## 
## $call
## ecdf(rpois(100, 10))
```

> The expression, which was used to create it (rpois(100, 10)), is stored in the call attribute.

6.  What class of object does the following code return? What base type is it 
    built on? What attributes does it use?

    
    ```r
    x <- table(rpois(100, 5))
    x
    ```
    
    ```
    ## 
    ##  1  2  3  4  5  6  7  8  9 10 
    ##  7  5 18 14 15 15 14  4  5  3
    ```


```r
class(x)
```

```
## [1] "table"
```

> This code returns a table object.


```r
typeof(x)
```

```
## [1] "integer"
```

> it is built upon the integer type.


```r
attributes(x)
```

```
## $dim
## [1] 10
## 
## $dimnames
## $dimnames[[1]]
##  [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"
## 
## 
## $class
## [1] "table"
```

> The attribute dimnames is used to name the elements of the integer vector.

## 13.3 Classes {#s3-classes}
\index{S3!classes} 
\index{attributes!class}
\indexc{class()}

If you have done object-oriented programming in other languages, you may be surprised to learn that S3 has no formal definition of a class: to make an object an instance of a class, you simply set the __class attribute__. You can do that during creation with `structure()`, or after the fact with `class<-()`: 


```r
# Create and assign class in one step
x <- structure(list(), class = "my_class")

# Create, then set class
x <- list()
class(x) <- "my_class"
```

You can determine the class of an S3 object with `class(x)`, and see if an object is an instance of a class using `inherits(x, "classname")`.


```r
class(x)
```

```
## [1] "my_class"
```

```r
inherits(x, "my_class")
```

```
## [1] TRUE
```

```r
inherits(x, "your_class")
```

```
## [1] FALSE
```

The class name can be any string, but I recommend using only letters and `_`. Avoid `.` because (as mentioned earlier) it can be confused with the `.` separator between a generic name and a class name. When using a class in a package, I recommend including the package name in the class name. That ensures you won't accidentally clash with a class defined by another package.

S3 has no checks for correctness which means you can change the class of existing objects:


```r
# Create a linear model
mod <- lm(log(mpg) ~ log(disp), data = mtcars)
class(mod)
```

```
## [1] "lm"
```

```r
print(mod)
```

```
## 
## Call:
## lm(formula = log(mpg) ~ log(disp), data = mtcars)
## 
## Coefficients:
## (Intercept)    log(disp)  
##      5.3810      -0.4586
```

```r
# Turn it into a date (?!)
class(mod) <- "Date"

# Unsurprisingly this doesn't work very well
print(mod)
```

```
## Error in as.POSIXlt.Date(x): 'list' object cannot be coerced to type 'integer'
```

If you've used other OO languages, this might make you feel queasy, but in practice this flexibility causes few problems.  R doesn't stop you from shooting yourself in the foot, but as long as you don't aim the gun at your toes and pull the trigger, you won't have a problem.

To avoid foot-bullet intersections when creating your own class, I recommend that you usually provide three functions:

* A low-level __constructor__, `new_myclass()`, that efficiently creates new
  objects with the correct structure.

* A __validator__, `validate_myclass()`, that performs more computationally 
  expensive checks to ensure that the object has correct values.

* A user-friendly __helper__, `myclass()`, that provides a convenient way for
  others to create objects of your class.

You don't need a validator for very simple classes, and you can skip the helper if the class is for internal use only, but you should always provide a constructor.

### 13.3.1 Constructors {#s3-constructor}
\index{S3!constructors}
\index{constructors!S3}

S3 doesn't provide a formal definition of a class, so it has no built-in way to ensure that all objects of a given class have the same structure (i.e. the same base type and the same attributes with the same types). Instead, you must enforce a consistent structure by using a __constructor__.

The constructor should follow three principles:

* Be called `new_myclass()`.

* Have one argument for the base object, and one for each attribute. 

* Check the type of the base object and the types of each attribute.

I'll illustrate these ideas by creating constructors for base classes[^base-constructors] that you're already familiar with. To start, lets make a constructor for the simplest S3 class: `Date`. A `Date` is just a double with a single attribute: its `class` is "Date". This makes for a very simple constructor:

[^base-constructors]: Recent versions of R have `.Date()`, `.difftime()`, `.POSIXct()`, and `.POSIXlt()` constructors but they are internal, not well documented, and do not follow the principles that I recommend.

\indexc{Date}

```r
new_Date <- function(x = double()) {
  stopifnot(is.double(x))
  structure(x, class = "Date")
}

new_Date(c(-1, 0, 1))
```

```
## [1] "1969-12-31" "1970-01-01" "1970-01-02"
```

The purpose of constructors is to help you, the developer. That means you can keep them simple, and you don't need to optimise error messages for public consumption. If you expect users to also create objects, you should create a friendly helper function, called `class_name()`, which I'll describe shortly.

A slightly more complicated constructor is that for `difftime`, which is used to represent time differences. It is again built on a double, but has a `units` attribute that must take one of a small set of values:

\indexc{difftime}

```r
new_difftime <- function(x = double(), units = "secs") {
  stopifnot(is.double(x))
  units <- match.arg(units, c("secs", "mins", "hours", "days", "weeks"))

  structure(x,
    class = "difftime",
    units = units
  )
}

new_difftime(c(1, 10, 3600), "secs")
```

```
## Time differences in secs
## [1]    1   10 3600
```

```r
new_difftime(52, "weeks")
```

```
## Time difference of 52 weeks
```

The constructor is a developer function: it will be called in many places, by an experienced user. That means it's OK to trade a little safety in return for performance, and you should avoid potentially time-consuming checks in the constructor.

### 13.3.2 Validators
\index{S3!validators}
\index{validators!S3}

More complicated classes require more complicated checks for validity. Take factors, for example. A constructor only checks that types are correct, making it possible to create malformed factors:

\indexc{factor}

```r
new_factor <- function(x = integer(), levels = character()) {
  stopifnot(is.integer(x))
  stopifnot(is.character(levels))

  structure(
    x,
    levels = levels,
    class = "factor"
  )
}

new_factor(1:5, "a")
```

```
## Error in as.character.factor(x): malformed factor
```

```r
new_factor(1:2, c("a", "b"))
```

```
## [1] a b
## Levels: a b
```

```r
new_factor(0:1, "a")
```

```
## Error in as.character.factor(x): malformed factor
```

Rather than encumbering the constructor with complicated checks, it's better to put them in a separate function. Doing so allows you to cheaply create new objects when you know that the values are correct, and easily re-use the checks in other places. 


```r
validate_factor <- function(x) {
  values <- unclass(x)
  levels <- attr(x, "levels")

  if (!all(!is.na(values) & values > 0)) {
    stop(
      "All `x` values must be non-missing and greater than zero",
      call. = FALSE
    )
  }

  if (length(levels) < max(values)) {
    stop(
      "There must be at least as many `levels` as possible values in `x`",
      call. = FALSE
    )
  }

  x
}

new_factor(1:5, "a")
```

```
## Error in as.character.factor(x): malformed factor
```

```r
validate_factor(new_factor(1:5, "a"))
```

```
## Error: There must be at least as many `levels` as possible values in `x`
```

```r
validate_factor(new_factor(0:1, "a"))
```

```
## Error: All `x` values must be non-missing and greater than zero
```

This validator function is called primarily for its side-effects (throwing an error if the object is invalid) so you'd expect it to invisibly return its primary input (as described in Section \@ref(invisible)). However, it's useful for validation methods to return visibly, as we'll see next.

### 13.3.3 Helpers
\index{S3!helpers}
\index{helpers!S3}

If you want users to construct objects from your class, you should also provide a helper method that makes their life as easy as possible. A helper should always:

* Have the same name as the class, e.g. `myclass()`.

* Finish by calling the constructor, and the validator, if it exists.

* Create carefully crafted error messages tailored towards an end-user.

* Have a thoughtfully crafted user interface with carefully chosen default
  values and useful conversions.

The last bullet is the trickiest, and it's hard to give general advice. However, there are three common patterns:

*   Sometimes all the helper needs to do is coerce its inputs to the desired
    type. For example, `new_difftime()` is very strict, and violates the usual
    convention that you can use an integer vector wherever you can use a 
    double vector:
    
    
    ```r
    new_difftime(1:10)
    ```
    
    ```
    ## Error in new_difftime(1:10): is.double(x) is not TRUE
    ```
    
    It's not the job of the constructor to be flexible, so here we create
    a helper that just coerces the input to a double.
    
    
    ```r
    difftime <- function(x = double(), units = "secs") {
      x <- as.double(x)
      new_difftime(x, units = units)
    }
    
    difftime(1:10)
    ```
    
    ```
    ## Time differences in secs
    ##  [1]  1  2  3  4  5  6  7  8  9 10
    ```
    \indexc{difftime}
    
*   Often, the most natural representation of a complex object is a string.
    For example, it's very convenient to specify factors with a character 
    vector. The code below shows a simple version of `factor()`: it takes a
    character vector, and guesses that the levels should be the unique values. 
    This is not always correct (since some levels might not be seen in the 
    data), but it's a useful default.
    
    
    ```r
    factor <- function(x = character(), levels = unique(x)) {
      ind <- match(x, levels)
      validate_factor(new_factor(ind, levels))
    }
    
    factor(c("a", "a", "b"))
    ```
    
    ```
    ## [1] a a b
    ## Levels: a b
    ```
    \indexc{factor}

*   Some complex objects are most naturally specified by multiple simple    
    components. For example, I think it's natural to construct a date-time
    by supplying the individual components (year, month, day etc). That leads
    me to this `POSIXct()` helper that resembles the existing `ISODatetime()` 
    function[^efficient]:

    
    ```r
    POSIXct <- function(year = integer(), 
                        month = integer(), 
                        day = integer(), 
                        hour = 0L, 
                        minute = 0L, 
                        sec = 0, 
                        tzone = "") {
      ISOdatetime(year, month, day, hour, minute, sec, tz = tzone)
    }
    
    POSIXct(2020, 1, 1, tzone = "America/New_York")
    ```
    
    ```
    ## [1] "2020-01-01 EST"
    ```
    \indexc{POSIXct}

[^efficient]: This helper is not efficient: behind the scenes `ISODatetime()` works by pasting the components into a string and then using `strptime()`. A more efficient equivalent is available in `lubridate::make_datetime()`.

For more complicated classes, you should feel free to go beyond these patterns to make life as easy as possible for your users.

### 13.3.4 Exercises

1.  Write a constructor for `data.frame` objects. What base type is a data
    frame built on? What attributes does it use? What are the restrictions
    placed on the individual elements? What about the names?


```r
typeof(funs_df_filtered)
```

```
## [1] "list"
```

```r
attributes(funs_df_filtered)
```

```
## $names
## [1] "names(funs_df)" "names"         
## 
## $row.names
##    [1]    1    2    3    4    5    6    7    8    9   10   11   12   13   14
##   [15]   15   16   17   18   19   20   21   22   23   24   25   26   27   28
##   [29]   29   30   31   32   33   34   35   36   37   38   39   40   41   42
##   [43]   43   44   45   46   47   48   49   50   51   52   53   54   55   56
##   [57]   57   58   59   60   61   62   63   64   65   66   67   68   69   70
##   [71]   71   72   73   74   75   76   77   78   79   80   81   82   83   84
##   [85]   85   86   87   88   89   90   91   92   93   94   95   96   97   98
##   [99]   99  100  101  102  103  104  105  106  107  108  109  110  111  112
##  [113]  113  114  115  116  117  118  119  120  121  122  123  124  125  126
##  [127]  127  128  129  130  131  132  133  134  135  136  137  138  139  140
##  [141]  141  142  143  144  145  146  147  148  149  150  151  152  153  154
##  [155]  155  156  157  158  159  160  161  162  163  164  165  166  167  168
##  [169]  169  170  171  172  173  174  175  176  177  178  179  180  181  182
##  [183]  183  184  185  186  187  188  189  190  191  192  193  194  195  196
##  [197]  197  198  199  200  201  202  203  204  205  206  207  208  209  210
##  [211]  211  212  213  214  215  216  217  218  219  220  221  222  223  224
##  [225]  225  226  227  228  229  230  231  232  233  234  235  236  237  238
##  [239]  239  240  241  242  243  244  245  246  247  248  249  250  251  252
##  [253]  253  254  255  256  257  258  259  260  261  262  263  264  265  266
##  [267]  267  268  269  270  271  272  273  274  275  276  277  278  279  280
##  [281]  281  282  283  284  285  286  287  288  289  290  291  292  293  294
##  [295]  295  296  297  298  299  300  301  302  303  304  305  306  307  308
##  [309]  309  310  311  312  313  314  315  316  317  318  319  320  321  322
##  [323]  323  324  325  326  327  328  329  330  331  332  333  334  335  336
##  [337]  337  338  339  340  341  342  343  344  345  346  347  348  349  350
##  [351]  351  352  353  354  355  356  357  358  359  360  361  362  363  364
##  [365]  365  366  367  368  369  370  371  372  373  374  375  376  377  378
##  [379]  379  380  381  382  383  384  385  386  387  388  389  390  391  392
##  [393]  393  394  395  396  397  398  399  400  401  402  403  404  405  406
##  [407]  407  408  409  410  411  412  413  414  415  416  417  418  419  420
##  [421]  421  422  423  424  425  426  427  428  429  430  431  432  433  434
##  [435]  435  436  437  438  439  440  441  442  443  444  445  446  447  448
##  [449]  449  450  451  452  453  454  455  456  457  458  459  460  461  462
##  [463]  463  464  465  466  467  468  469  470  471  472  473  474  475  476
##  [477]  477  478  479  480  481  482  483  484  485  486  487  488  489  490
##  [491]  491  492  493  494  495  496  497  498  499  500  501  502  503  504
##  [505]  505  506  507  508  509  510  511  512  513  514  515  516  517  518
##  [519]  519  520  521  522  523  524  525  526  527  528  529  530  531  532
##  [533]  533  534  535  536  537  538  539  540  541  542  543  544  545  546
##  [547]  547  548  549  550  551  552  553  554  555  556  557  558  559  560
##  [561]  561  562  563  564  565  566  567  568  569  570  571  572  573  574
##  [575]  575  576  577  578  579  580  581  582  583  584  585  586  587  588
##  [589]  589  590  591  592  593  594  595  596  597  598  599  600  601  602
##  [603]  603  604  605  606  607  608  609  610  611  612  613  614  615  616
##  [617]  617  618  619  620  621  622  623  624  625  626  627  628  629  630
##  [631]  631  632  633  634  635  636  637  638  639  640  641  642  643  644
##  [645]  645  646  647  648  649  650  651  652  653  654  655  656  657  658
##  [659]  659  660  661  662  663  664  665  666  667  668  669  670  671  672
##  [673]  673  674  675  676  677  678  679  680  681  682  683  684  685  686
##  [687]  687  688  689  690  691  692  693  694  695  696  697  698  699  700
##  [701]  701  702  703  704  705  706  707  708  709  710  711  712  713  714
##  [715]  715  716  717  718  719  720  721  722  723  724  725  726  727  728
##  [729]  729  730  731  732  733  734  735  736  737  738  739  740  741  742
##  [743]  743  744  745  746  747  748  749  750  751  752  753  754  755  756
##  [757]  757  758  759  760  761  762  763  764  765  766  767  768  769  770
##  [771]  771  772  773  774  775  776  777  778  779  780  781  782  783  784
##  [785]  785  786  787  788  789  790  791  792  793  794  795  796  797  798
##  [799]  799  800  801  802  803  804  805  806  807  808  809  810  811  812
##  [813]  813  814  815  816  817  818  819  820  821  822  823  824  825  826
##  [827]  827  828  829  830  831  832  833  834  835  836  837  838  839  840
##  [841]  841  842  843  844  845  846  847  848  849  850  851  852  853  854
##  [855]  855  856  857  858  859  860  861  862  863  864  865  866  867  868
##  [869]  869  870  871  872  873  874  875  876  877  878  879  880  881  882
##  [883]  883  884  885  886  887  888  889  890  891  892  893  894  895  896
##  [897]  897  898  899  900  901  902  903  904  905  906  907  908  909  910
##  [911]  911  912  913  914  915  916  917  918  919  920  921  922  923  924
##  [925]  925  926  927  928  929  930  931  932  933  934  935  936  937  938
##  [939]  939  940  941  942  943  944  945  946  947  948  949  950  951  952
##  [953]  953  954  955  956  957  958  959  960  961  962  963  964  965  966
##  [967]  967  968  969  970  971  972  973  974  975  976  977  978  979  980
##  [981]  981  982  983  984  985  986  987  988  989  990  991  992  993  994
##  [995]  995  996  997  998  999 1000 1001 1002 1003 1004 1005 1006 1007 1008
## [1009] 1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022
## [1023] 1023 1024 1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036
## [1037] 1037 1038 1039 1040 1041 1042 1043 1044 1045 1046 1047 1048 1049 1050
## [1051] 1051 1052 1053 1054 1055 1056 1057 1058 1059 1060 1061 1062 1063 1064
## [1065] 1065 1066 1067 1068 1069 1070 1071 1072 1073 1074 1075 1076 1077 1078
## [1079] 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 1089 1090 1091 1092
## [1093] 1093 1094 1095 1096 1097 1098 1099 1100 1101 1102 1103 1104 1105 1106
## [1107] 1107 1108 1109 1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120
## [1121] 1121 1122 1123 1124 1125 1126 1127 1128 1129 1130 1131 1132 1133 1134
## [1135] 1135 1136 1137 1138 1139 1140 1141 1142 1143 1144 1145 1146 1147 1148
## [1149] 1149 1150 1151 1152 1153 1154 1155 1156 1157 1158 1159 1160 1161 1162
## [1163] 1163 1164 1165 1166 1167 1168 1169 1170 1171 1172 1173 1174 1175 1176
## [1177] 1177 1178 1179 1180 1181 1182 1183 1184 1185 1186 1187 1188 1189 1190
## [1191] 1191 1192 1193 1194 1195 1196 1197 1198 1199 1200 1201 1202 1203 1204
## [1205] 1205 1206 1207 1208 1209 1210 1211 1212 1213 1214 1215 1216 1217 1218
## [1219] 1219 1220 1221 1222 1223 1224 1225 1226 1227 1228 1229 1230 1231 1232
## [1233] 1233 1234 1235 1236 1237 1238 1239 1240 1241 1242 1243 1244 1245 1246
## [1247] 1247 1248 1249 1250 1251 1252 1253 1254 1255 1256 1257 1258 1259 1260
## [1261] 1261 1262 1263 1264 1265 1266 1267 1268 1269 1270 1271 1272 1273 1274
## [1275] 1275 1276 1277 1278 1279 1280 1281 1282 1283 1284 1285 1286 1287 1288
## [1289] 1289 1290 1291 1292 1293 1294 1295 1296 1297 1298 1299 1300 1301 1302
## [1303] 1303 1304 1305 1306 1307 1308 1309 1310 1311 1312 1313 1314 1315 1316
## [1317] 1317 1318 1319 1320 1321 1322 1323 1324 1325 1326 1327 1328 1329 1330
## [1331] 1331 1332 1333 1334 1335
## 
## $class
## [1] "data.frame"
```

```r
class(funs_df_filtered)
```

```
## [1] "data.frame"
```

> Data frames are built on named lists of vectors, which all have the same length.

> Besides the class and the column names (names), the row.names are their only further attribute. This must be a character vector with the same length as the other vectors.

> We need to provide the number of rows as an input to make it possible to create data frames with 0 columns but multiple rows.

>.set_row_names(n) generates that form for automatic row names of length n, to be assigned to attr(a data frame, "row.names").


```r
new_data.frame <- function(x, n, row.names = NULL) {
  
  # Check if the underlying object is a list
  stopifnot(is.list(x))
  
  # Check all inputs are the same length 
  # (This check also allows that x has length 0)
  stopifnot(all(lengths(x) == n))
  
  if (is.null(row.names)) {
    
    # Use special row names helper from base R
    # .set_row_names(n) generates that form for automatic row names 
    # of length n, to be assigned to attr(<a data frame>, "row.names").
    row.names <- .set_row_names(n)
    
    
  } else {
    
    # Otherwise check that they're a character vector with the correct length
    stopifnot(is.character(row.names), length(row.names) == n)
  }
  
  structure(
    x,
    class = "data.frame",
    row.names = row.names
  )
}
```


```r
# Test
x <- list(a = 1, b = 2)
x
```

```
## $a
## [1] 1
## 
## $b
## [1] 2
```


```r
new_data.frame(x, n = 1)
```

```
##   a b
## 1 1 2
```


```r
new_data.frame(x, n = 1, row.names = "l1")
```

```
##    a b
## l1 1 2
```


```r
# Create a data frame with 0 columns and 2 rows
new_data.frame(list(), n = 2)
```

```
## data frame with 0 columns and 2 rows
```

```r
#> data frame with 0 columns and 2 rows
```



2.  Enhance my `factor()` helper to have better behaviour when one or
    more `values` is not found in `levels`. What does `base::factor()` do
    in this situation?
    

```r
factor
```

```
## function(x = character(), levels = unique(x)) {
##   ind <- match(x, levels)
##   validate_factor(new_factor(ind, levels))
## }
```


```r
base::factor(c("a", "b", "c"), levels = c("a", "b"))
```

```
## [1] a    b    <NA>
## Levels: a b
```


```r
new_factor <- function(x = integer(), levels = character()) {
  stopifnot(is.integer(x))
  stopifnot(is.character(levels))

  structure(
    x,
    levels = levels,
    class = "factor"
  )
}
```


```r
validate_factor <- function(x) {
  values <- unclass(x)
  levels <- attr(x, "levels")

  if (!all(!is.na(values) & values > 0)) {
    stop(
      "All `x` values must be non-missing and greater than zero",
      call. = FALSE
    )
  }

  if (length(levels) < max(values)) {
    stop(
      "There must be at least as many `levels` as possible values in `x`",
      call. = FALSE
    )
  }

  x
}
```


```r
factor <- function(x = character(), levels = unique(x)) {
  ind <- match(x, levels)
  validate_factor(new_factor(ind, levels))
}
```


```r
A <- c("a", "b", "c", "d")
B <- c("a", "b")
setdiff(A, B)
```

```
## [1] "c" "d"
```

```r
match(A,B)
```

```
## [1]  1  2 NA NA
```



```r
# The levels argument is optional. 
# If it's not provided, the function will use the unique values of x as the levels.
factor2 <- function(x = character(), levels = unique(x)) {
  
  # Error if levels don't include all values
  # uses setdiff() to find any values in x that are not in the levels argument.
  missing <- unique(setdiff(x, levels))
  
  # If there are any missing values, the function stops with an error message.
  if (length(missing) > 0) {
    stop(
      "The following values are missing in the levels of x: ",
      paste0("'", missing, "'", collapse = ", "), ".", 
      call. = FALSE
    )
  }
  
  # uses match() to create a new factor with the same levels as x, 
  # but with the values in the order of the levels argument.
  ind <- match(x, levels)
  
  # uses validate_factor() to make sure the new factor is valid.
  validate_factor(new_factor(ind , levels))
}
```


```r
# Test
factor2(c("a", "b", "c", "d"), levels = c("a", "b"))
```



3.  Carefully read the source code of `factor()`. What does it do that
    my constructor does not?
    

```r
base::factor
```

```
## function (x = character(), levels, labels = levels, exclude = NA, 
##     ordered = is.ordered(x), nmax = NA) 
## {
##     if (is.null(x)) 
##         x <- character()
##     nx <- names(x)
##     if (missing(levels)) {
##         y <- unique(x, nmax = nmax)
##         ind <- order(y)
##         levels <- unique(as.character(y)[ind])
##     }
##     force(ordered)
##     if (!is.character(x)) 
##         x <- as.character(x)
##     levels <- levels[is.na(match(levels, exclude))]
##     f <- match(x, levels)
##     if (!is.null(nx)) 
##         names(f) <- nx
##     if (missing(labels)) {
##         levels(f) <- as.character(levels)
##     }
##     else {
##         nlab <- length(labels)
##         if (nlab == length(levels)) {
##             nlevs <- unique(xlevs <- as.character(labels))
##             at <- attributes(f)
##             at$levels <- nlevs
##             f <- match(xlevs, nlevs)[f]
##             attributes(f) <- at
##         }
##         else if (nlab == 1L) 
##             levels(f) <- paste0(labels, seq_along(levels))
##         else stop(gettextf("invalid 'labels'; length %d should be 1 or %d", 
##             nlab, length(levels)), domain = NA)
##     }
##     class(f) <- c(if (ordered) "ordered", "factor")
##     f
## }
## <bytecode: 0x000001af0aeef7d0>
## <environment: namespace:base>
```

> 1. If the input is NULL, then return NULL.

> 2. If the input is not a character, then convert it to a character.

> 3. If the levels argument is not provided, then get the unique values of the input.

> 4. If the labels argument is not provided, then use the unique values of the input as the labels.

> 5. If the labels argument is provided, then use the labels argument as the labels.

> 6. If the labels argument is a single value, then use the labels argument as a prefix for the labels.

> 7. If the labels argument is a vector of values, then use the labels argument as the labels.

> 8. If the labels argument is a vector of values, then the length of the labels argument must be equal to the length of the levels argument.

> 9. If the labels argument is a vector of values, then the length of the labels argument must be equal to the length of the unique


```r
new_factor <- function(x = integer(), levels = character()) {
  stopifnot(is.integer(x))
  stopifnot(is.character(levels))

  structure(
    x,
    levels = levels,
    class = "factor"
  )
}
```
    
4.  Factors have an optional "contrasts" attribute. Read the help for `C()`, 
    and briefly describe the purpose of the attribute. What type should it 
    have? Rewrite the `new_factor()` constructor to include this attribute.

> Sets the "contrasts" attribute for the factor.


```r
## reset contrasts to defaults, sets the default contrasts to be used for all factors.
options(contrasts = c("contr.treatment", "contr.poly"))

## creates a new factor tens, which is a polynomial contrast of the factor tension.
tens <- with(warpbreaks, C(tension, poly, 1))

## shows the attributes of the new factor tens.
attributes(tens)
```

```
## $levels
## [1] "L" "M" "H"
## 
## $class
## [1] "factor"
## 
## $contrasts
##              .L
## L -7.071068e-01
## M -7.850462e-17
## H  7.071068e-01
```

```r
## tension SHOULD be an ordered factor, but as it is not we can use
## shows the use of the new factor tens in an ANOVA.
aov(breaks ~ wool + tens + tension, data = warpbreaks)
```

```
## Call:
##    aov(formula = breaks ~ wool + tens + tension, data = warpbreaks)
## 
## Terms:
##                     wool     tens  tension Residuals
## Sum of Squares   450.667 1950.694   83.565  6747.889
## Deg. of Freedom        1        1        1        50
## 
## Residual standard error: 11.61713
## 1 out of 5 effects not estimable
## Estimated effects may be unbalanced
```

```r
## show the use of ...  The default contrast is contr.treatment here
summary(lm(breaks ~ wool + C(tension, base = 2), data = warpbreaks))
```

```
## 
## Call:
## lm(formula = breaks ~ wool + C(tension, base = 2), data = warpbreaks)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -19.500  -8.083  -2.139   6.472  30.722 
## 
## Coefficients:
##                       Estimate Std. Error t value Pr(>|t|)    
## (Intercept)             29.278      3.162   9.260    2e-12 ***
## woolB                   -5.778      3.162  -1.827   0.0736 .  
## C(tension, base = 2)1   10.000      3.872   2.582   0.0128 *  
## C(tension, base = 2)3   -4.722      3.872  -1.219   0.2284    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 11.62 on 50 degrees of freedom
## Multiple R-squared:  0.2691,	Adjusted R-squared:  0.2253 
## F-statistic: 6.138 on 3 and 50 DF,  p-value: 0.00123
```

```r
# following on from help(esoph)
model3 <- glm(cbind(ncases, ncontrols) ~ agegp + C(tobgp, , 1) +
     C(alcgp, , 1), data = esoph, family = binomial())
summary(model3)
```

```
## 
## Call:
## glm(formula = cbind(ncases, ncontrols) ~ agegp + C(tobgp, , 1) + 
##     C(alcgp, , 1), family = binomial(), data = esoph)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -2.3018  -0.7234  -0.2306   0.5737   2.4290  
## 
## Coefficients:
##                 Estimate Std. Error z value Pr(>|z|)    
## (Intercept)     -1.15264    0.20326  -5.671 1.42e-08 ***
## agegp.L          3.81892    0.67862   5.627 1.83e-08 ***
## agegp.Q         -1.49473    0.60671  -2.464   0.0138 *  
## agegp.C          0.07923    0.46318   0.171   0.8642    
## agegp^4          0.12136    0.32203   0.377   0.7063    
## agegp^5         -0.24856    0.21153  -1.175   0.2400    
## C(tobgp, , 1).L  0.98287    0.21519   4.568 4.93e-06 ***
## C(alcgp, , 1).L  2.38736    0.23462  10.175  < 2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 367.953  on 87  degrees of freedom
## Residual deviance:  91.121  on 80  degrees of freedom
## AIC: 222.18
## 
## Number of Fisher Scoring iterations: 6
```

> Our updated new_factor() constructor gets a contrasts argument, which accepts a numeric matrix or NULL (default).


```r
updated_new_factor <- function(x = integer(), levels = character(), contrasts = NULL) {
  
  # checks that x is an integer vector.
  stopifnot(is.integer(x))
  
  # checks that levels is a character vector.
  stopifnot(is.character(levels))
  
  # checks that contrasts is a numeric matrix.
  if (!is.null(contrasts)) {
    stopifnot(is.matrix(contrasts) && is.numeric(contrasts))
  }
  
  # returns a factor with the given levels and contrasts.
  structure(
    x,
    levels = levels,
    class = "factor",
    contrasts = contrasts
  )
}
```

5.  Read the documentation for `utils::as.roman()`. How would you write a
    constructor for this class? Does it need a validator? What might a helper 
    do?


```r
utils::as.roman
```

```
## function (x) 
## .as.roman(x, check.range = TRUE)
## <bytecode: 0x000001af0ed6da80>
## <environment: namespace:utils>
```

> Simple manipulation of (a small set of) integer numbers as roman numerals.

> as.roman creates objects of class "roman" which are internally represented as integers, and have suitable methods for printing, formatting, subsetting, coercion, etc, see methods(class = "roman").

> Only numbers between 1 and 3899 have a unique representation as roman numbers, and hence others result in as.roman(NA).


```r
new_roman <- function(x = integer()) {
  
  # checking that x is an integer.
  stopifnot(is.integer(x))
  
  # creating a new object of class "roman" with the value of x.
  structure(x, class = "roman")
}
```


```r
validate_roman <- function(x) {
  
  # unclasses x, which is a Roman object, and stores the result in values.
  values <- unclass(x)
  
  # checks whether any of the values are less than 1 or greater than 3899. 
  # If so, it stops with an error message.
  if (any(values < 1 | values > 3899)) {
    stop(
      "Roman numbers must fall between 1 and 3899.",
      call. = FALSE
    )
  }
  
  # returns x.
  x
}
```


```r
roman_helper <- function(x = integer()) {
  
  # converting the argument to an integer.
  x <- as.integer(x)
  
  # passing the integer to the new_roman function.
  # passing the result of the new_roman function to the validate_roman function.
  # returning the result of the validate_roman function.
  validate_roman(new_roman(x))
}
```


```r
# Test
roman_helper(c(1, 123, 3899))
roman_helper(14000)
roman_helper(0)
```

